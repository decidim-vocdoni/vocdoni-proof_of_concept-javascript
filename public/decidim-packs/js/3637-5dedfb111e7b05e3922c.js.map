{"version":3,"file":"js/3637-5dedfb111e7b05e3922c.js","mappings":"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","sources":["webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/ajax_modals.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/data_picker.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/form_datepicker.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/check_boxes_tree.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/form_filter.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/delayed.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/foundation-datepicker/js/locales/foundation-datepicker.lb.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/gallery.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/input_hashtags.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/input_mentions.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/session_timeouter.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/vendor/foundation-datepicker.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/vendor/tribute.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/vizzs/index.js","webpack://decidim-development-app/../decidim-core/app/packs/src/decidim/vizzs/areachart.js"],"sourcesContent":["$(() => {\n  $(document).on(\"click\", \"a[data-open-url],button[data-open-url]\", (event) => {\n    event.preventDefault();\n    const link = event.currentTarget;\n    const $modal = $(`#${link.dataset.open}`);\n    $modal.html(\"<div class='loading-spinner'></div>\");\n    $.ajax({\n      type: \"get\",\n      url: link.dataset.openUrl,\n      success: (html) => {\n        const $html = $(html);\n        $modal.html($html);\n        $html.foundation();\n      },\n      error: function (request, status, error) {\n        $modal.html(`<h3>${status}</h3><p>${error}</p>`);\n      }\n    });\n  });\n});\n","export default class DataPicker {\n  constructor(pickers) {\n    this.modal = this._createModalContainer();\n    this.modal.appendTo($(\"body\"));\n    this.current = null;\n\n    pickers.each((_index, picker) => {\n      this.activate(picker);\n    });\n  }\n\n  activate(picker) {\n    let $picker = $(picker);\n\n    this._setCurrentPicker($picker, null);\n\n    let input = \"hidden\",\n        name = this.current.name,\n        values = this.current.values;\n\n    if (this.current.multiple) {\n      name += \"[]\";\n    }\n\n    $(\"div\", values).each((_index2, div) => {\n      let value = $(\"a\", div).data(\"picker-value\");\n      $(div).prepend($(`<input type=\"${input}\" checked name=\"${name}\" value=\"${value}\"/>`));\n    });\n\n    $picker.on(\"click\", \"a\", (event) => {\n      event.preventDefault();\n      if ($picker.hasClass(\"disabled\")) {\n        return;\n      }\n      const isMultiPicker = $picker.hasClass(\"picker-multiple\");\n\n      if ($(this._targetFromEvent(event)).hasClass(\"picker-prompt\") || !isMultiPicker) {\n        this._openPicker($picker, this._targetFromEvent(event));\n      }  else if (this._targetFromEvent(event).tagName === \"A\") {\n        this._removeValue($picker, this._targetFromEvent(event).parentNode);\n      } else {\n        this._removeValue($picker, this._targetFromEvent(event));\n      }\n    });\n\n    $picker.on(\"click\", \"input\", (event) => {\n      this._removeValue($picker, this._targetFromEvent(event));\n    });\n\n    if (this.current.autosort) {\n      this._sort();\n    }\n  }\n\n  enabled(picker, value) {\n    $(picker).toggleClass(\"disabled\", !value);\n    $(\"input\", picker).attr(\"disabled\", !value);\n  }\n\n  clear(picker) {\n    $(\".picker-values\", picker).html(\"\");\n  }\n\n  save(picker) {\n    return $(\".picker-values div:has(input:checked)\", picker).map((_index, div) => {\n      let $link = $(\"a\", div);\n      return {\n        value: $(\"input\", div).val(),\n        text: $link.text(),\n        url: $link.attr(\"href\")\n      };\n    }).get();\n  }\n\n  load(picker, savedData) {\n    this._setCurrentPicker($(picker), null);\n    $.each(savedData, (_index, data) => {\n      this._choose(data, { interactive: false, modify: false });\n    });\n    if (this.current.autosort) {\n      this._sort();\n    }\n  }\n\n  _createModalContainer() {\n    // Add a header because we are referencing the title element with\n    // `aria-labelledby`. If the title doesn't exist, the \"labelled by\"\n    // reference is incorrect.\n    const headerHtml = '<div class=\"scope-picker picker-header\"><h6 id=\"data_picker-title\" class=\"h2\"></h6></div>';\n\n    return $(`<div class=\"small reveal\" id=\"data_picker-modal\" aria-hidden=\"true\" aria-live=\"assertive\" role=\"dialog\" aria-labelledby=\"data_picker-title\" data-reveal data-multiple-opened=\"true\">\n             <div class=\"data_picker-modal-content\">${headerHtml}</div>\n             <button class=\"close-button\" data-close type=\"button\" data-reveal-id=\"data_picker-modal\"><span aria-hidden=\"true\">&times;</span></button>\n             </div>`);\n  }\n\n  _openPicker($picker, target) {\n    this._setCurrentPicker($picker, target);\n    this._load($(\"a\", target).attr(\"href\"));\n  }\n\n  _setCurrentPicker($picker, target) {\n    let $target = false;\n    if (target && !$(target).hasClass(\"picker-prompt\")) {\n      $target = $(target);\n    }\n\n    this.current = {\n      picker: $picker,\n      name: $picker.data(\"picker-name\"),\n      values: $picker.find(\".picker-values\"),\n      multiple: $picker.hasClass(\"picker-multiple\"),\n      autosort: $picker.hasClass(\"picker-multiple\") && $picker.hasClass(\"picker-autosort\"),\n      target: $target\n    };\n  }\n\n  _load(url) {\n    $.ajax(url).done((resp) => {\n      let modalContent = $(\".data_picker-modal-content\", this.modal);\n      modalContent.html(resp);\n      this._handleLinks(modalContent);\n      this._handleCheckboxes(modalContent);\n      this.modal.foundation(\"open\");\n    });\n  }\n\n  _handleLinks(content) {\n    $(\"a\", content).each((_index, link) => {\n      let $link = $(link);\n      $link.click((event) => {\n        event.preventDefault();\n        if ($link.data(\"close\") || $link.data(\"close\") === \"\") {\n          return;\n        }\n\n        let chooseUrl = $link.attr(\"href\");\n        if (chooseUrl) {\n          if (typeof $link.data(\"picker-choose\") === \"undefined\") {\n            this._load(chooseUrl);\n          } else {\n            this._choose(\n              { url: chooseUrl, value: $link.data(\"picker-value\") || \"\", text: $link.data(\"picker-text\") || \"\" }\n            );\n          }\n        }\n      });\n    });\n  }\n\n  _handleCheckboxes(content) {\n    $(\"input[type=checkbox][data-picker-choose]\", content).each((_index, checkbox) => {\n      const $checkbox = $(checkbox);\n      checkbox.checked = this._targetFromValue($checkbox.val()) !== null;\n    }).change((event) => {\n      const $checkbox = $(event.target);\n      if (event.target.checked) {\n        this._choose(\n          { url: $checkbox.data(\"picker-url\"), value: $checkbox.val() || \"\", text: $checkbox.data(\"picker-text\") || \"\" },\n          { modify: false, close: false }\n        );\n      }\n      else {\n        this._removeValue(this.current.picker, this._targetFromValue($checkbox.val()));\n      }\n    });\n  }\n\n  _choose(data, opts = {}) {\n    const options = Object.assign({ interactive: true, modify: true, close: true }, opts);\n\n    let dataText = this._escape(data.text);\n    let choosenOption = null;\n\n    if (!this.current.target && options.modify) {\n      this.current.target = this._targetFromValue(data.value);\n    }\n\n    // Add or update value appearance\n    if (this.current.target && options.modify) {\n      let link = $(\"a\", this.current.target);\n      link.data(\"picker-value\", data.value);\n      link.attr(\"href\", data.url);\n      choosenOption = this.current.target;\n      if (this.current.multiple) {\n        link.html(`&times;&nbsp;${dataText}`);\n      } else {\n        link.text(dataText);\n      }\n    } else {\n      let input = \"hidden\",\n          name = this.current.name;\n\n      if (this.current.multiple) {\n        name += \"[]\";\n        choosenOption = $(`<div><input type=\"${input}\" checked name=\"${name}\"/><a href=\"${data.url}\" data-picker-value=\"${data.value}\" class=\"label primary\">&times;&nbsp;${dataText}</a></div>`);\n      } else {\n        choosenOption = $(`<div><input type=\"${input}\" checked name=\"${name}\"/><a href=\"${data.url}\" data-picker-value=\"${data.value}\">${dataText}</a></div>`);\n      }\n      choosenOption.appendTo(this.current.values);\n\n      if (!this.current.target) {\n        this.current.target = choosenOption;\n      }\n    }\n\n    // Set input value\n    let $input = $(\"input\", choosenOption);\n    $input.attr(\"value\", data.value);\n\n    if (this.current.autosort) {\n      this._sort();\n    }\n\n    if (options.interactive) {\n      // Raise changed event\n      $input.trigger(\"change\");\n      this._removeErrors();\n\n      if (options.close) {\n        this._close();\n      }\n    }\n  }\n\n  _sort() {\n    const values = $(\".picker-values\", this.current.picker);\n    values.children().sort((item1, item2) => $(\"input\", item1).val() - $(\"input\", item2).val()).detach().appendTo(values);\n  }\n\n  _close() {\n    // Close modal and unset target element\n    this.modal.foundation(\"close\");\n    this.current.target = null;\n  }\n\n  _removeValue($picker, target) {\n    if (target) {\n      this._setCurrentPicker($picker, target);\n      // Fadeout (with time) doesn't work in system tests\n      let fadeoutTime = 500;\n      if (navigator && navigator.webdriver) {\n        fadeoutTime = 0;\n      }\n      this.current.target.fadeOut(fadeoutTime, () => {\n        this.current.target.remove();\n        this.current.target = null;\n      });\n    }\n  }\n\n  _removeErrors() {\n    let parent = this.current.picker.parent();\n    $(\".is-invalid-input\", parent).removeClass(\"is-invalid-input\");\n    $(\".is-invalid-label\", parent).removeClass(\"is-invalid-label\");\n    $(\".form-error.is-visible\", parent).removeClass(\"is-visible\");\n  }\n\n  _escape(str) {\n    return str.replace(/[\\u00A0-\\u9999<>&]/gim, function (char) {\n      return `&#${char.charCodeAt(0)};`;\n    });\n  }\n\n  _targetFromEvent(event) {\n    return event.target.parentNode;\n  }\n\n  _targetFromValue(value) {\n    return $(`[data-picker-value=${value}]`, this.current.picker).parent()[0] || null;\n  }\n}\n","/* eslint-disable require-jsdoc */\n\nexport default function formDatePicker() {\n  $(\"[data-datepicker]\").each((_index, node) => {\n    const language = $(\"html\").attr(\"lang\") || \"en\";\n    const initialDate = $(node).data(\"startdate\") || \"\";\n    const pickTime = $(node).data(\"timepicker\") === \"\";\n    const languageProps = $(node).fdatepicker.dates[language] && $(node).fdatepicker.dates[language].format;\n    let format = $(node).data(\"date-format\") || languageProps || \"mm/dd/yyyy\";\n\n    $(node).fdatepicker({\n      format,\n      initialDate,\n      language,\n      pickTime,\n      disableDblClickSelection: true,\n      leftArrow: \"<<\",\n      rightArrow: \">>\"\n    });\n  });\n}\n","/**\n * CheckBoxesTree component.\n */\nexport default class CheckBoxesTree {\n  constructor() {\n    this.checkboxesTree = document.querySelectorAll(\"[data-checkboxes-tree]\");\n    if (!this.checkboxesTree) {\n      return;\n    }\n\n    this.globalChecks = document.querySelectorAll(\"[data-global-checkbox] input\");\n    this.globalChecks.forEach((global) => {\n      if (global.value === \"\") {\n        global.classList.add(\"ignore-filter\")\n      }\n    });\n    this.checkGlobalCheck();\n\n    // Event listeners\n    this.checkboxesTree.forEach((input) => input.addEventListener(\"click\", (event) => this.checkTheCheckBoxes(event.target)));\n    document.querySelectorAll(\"[data-children-checkbox] input\").forEach((input) => {\n      input.addEventListener(\"change\", (event) => this.checkTheCheckParent(event.target));\n    });\n\n    // Review parent checkboxes on initial load\n    document.querySelectorAll(\"[data-children-checkbox] input\").forEach((input) => {\n      this.checkTheCheckParent(input);\n    });\n  }\n\n  /**\n   * Set checkboxes as checked if included in given values\n   * @public\n   * @param {Array} checkboxes - array of checkboxs to check\n   * @param {Array} values - values of checkboxes that should be checked\n   * @returns {Void} - Returns nothing.\n   */\n  updateChecked(checkboxes, values) {\n    checkboxes.each((index, checkbox) => {\n      if ((checkbox.value === \"\" && values.length === 1) || (checkbox.value !== \"\" && values.includes(checkbox.value))) {\n        checkbox.checked = true;\n        this.checkTheCheckBoxes(checkbox);\n        this.checkTheCheckParent(checkbox);\n      }\n    });\n  }\n\n  /**\n   * Set the container form(s) for the component, to disable ignored filters before submitting them\n   * @public\n   * @param {query} theForm - form or forms where the component will be used\n   * @returns {Void} - Returns nothing.\n   */\n  setContainerForm(theForm) {\n    theForm.on(\"submit ajax:before\", () => {\n      theForm.find(\".ignore-filters input, input.ignore-filter\").each((idx, elem) => {\n        elem.disabled = true;\n      });\n    });\n\n    theForm.on(\"ajax:send\", () => {\n      theForm.find(\".ignore-filters input, input.ignore-filter\").each((idx, elem) => {\n        elem.disabled = false;\n      });\n    });\n  }\n\n  /**\n   * Handles the click action on any checkbox.\n   * @private\n   * @param {Input} target - the input that has been checked\n   * @returns {Void} - Returns nothing.\n   */\n  checkTheCheckBoxes(target) {\n    // Quis custodiet ipsos custodes?\n    const targetChecks = target.dataset.checkboxesTree;\n    const checkStatus = target.checked;\n    const allChecks = document.querySelectorAll(`#${targetChecks} input[type='checkbox']`);\n\n    allChecks.forEach((input) => {\n      input.checked = checkStatus;\n      input.indeterminate = false;\n      input.classList.add(\"ignore-filter\");\n    });\n  }\n\n  /**\n   * Update global checkboxes state when the current selection changes\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  checkGlobalCheck() {\n    this.globalChecks.forEach((global) => {\n      const checksContext = global.dataset.checkboxesTree;\n      const totalInputs = document.querySelectorAll(\n        `#${checksContext} input[type='checkbox']`\n      );\n      const checkedInputs = document.querySelectorAll(\n        `#${checksContext} input[type='checkbox']:checked`\n      );\n      const indeterminateInputs = Array.from(totalInputs).filter((checkbox) => checkbox.indeterminate)\n\n      if (checkedInputs.length === 0 && indeterminateInputs.length === 0) {\n        global.checked = false;\n        global.indeterminate = false;\n      } else if (checkedInputs.length === totalInputs.length && indeterminateInputs.length === 0) {\n        global.checked = true;\n        global.indeterminate = false;\n      } else {\n        global.checked = true;\n        global.indeterminate = true;\n      }\n\n      totalInputs.forEach((input) => {\n        if (global.indeterminate && !input.indeterminate) {\n          input.classList.remove(\"ignore-filter\");\n        } else {\n          input.classList.add(\"ignore-filter\");\n        }\n        const subfilters = input.parentNode.parentNode.nextElementSibling;\n        if (subfilters && subfilters.classList.contains(\"filters__subfilters\")) {\n          if (input.indeterminate) {\n            subfilters.classList.remove(\"ignore-filters\");\n          } else {\n            subfilters.classList.add(\"ignore-filters\");\n          }\n        }\n      });\n    });\n  }\n\n  /**\n   * Update children checkboxes state when the current selection changes\n   * @private\n   * @param {Input} input - the checkbox to check its parent\n   * @returns {Void} - Returns nothing.\n   */\n  checkTheCheckParent(input) {\n    const checkBoxContext = $(input).parents(\".filters__subfilters\").attr(\"id\");\n    if (!checkBoxContext) {\n      this.checkGlobalCheck();\n      return;\n    }\n\n    const parentCheck = document.querySelector(\n      `[data-checkboxes-tree=${checkBoxContext}]`\n    );\n    const totalCheckSiblings = document.querySelectorAll(\n      `#${checkBoxContext} > div > [data-children-checkbox] > input, #${checkBoxContext} > [data-children-checkbox] > input`\n    );\n    const checkedSiblings = document.querySelectorAll(\n      `#${checkBoxContext} > div > [data-children-checkbox] > input:checked, #${checkBoxContext} > [data-children-checkbox] > input:checked`\n    );\n    const indeterminateSiblings = Array.from(totalCheckSiblings).filter((checkbox) => checkbox.indeterminate)\n\n    if (checkedSiblings.length === 0 && indeterminateSiblings.length === 0) {\n      parentCheck.checked = false;\n      parentCheck.indeterminate = false;\n    } else if (checkedSiblings.length === totalCheckSiblings.length && indeterminateSiblings.length === 0) {\n      parentCheck.checked = true;\n      parentCheck.indeterminate = false;\n    } else {\n      parentCheck.checked = true;\n      parentCheck.indeterminate = true;\n    }\n\n    totalCheckSiblings.forEach((sibling) => {\n      if (parent.indeterminate && !sibling.indeterminate) {\n        sibling.classList.remove(\"ignore-filter\");\n      } else {\n        sibling.classList.add(\"ignore-filter\");\n      }\n      const subfilters = sibling.parentNode.parentNode.nextElementSibling;\n      if (subfilters && subfilters.classList.contains(\"filters__subfilters\")) {\n        if (sibling.indeterminate) {\n          subfilters.classList.remove(\"ignore-filters\");\n        } else {\n          subfilters.classList.add(\"ignore-filters\");\n        }\n      }\n    });\n\n    this.checkTheCheckParent(parentCheck);\n  }\n}\n","/* eslint-disable no-div-regex, no-useless-escape, no-param-reassign, id-length */\n/* eslint max-lines: [\"error\", {\"max\": 350, \"skipBlankLines\": true}] */\n\n/**\n * A plain Javascript component that handles the form filter.\n * @class\n * @augments Component\n */\n\nimport delayed from \"src/decidim/delayed\"\nimport CheckBoxesTree from \"src/decidim/check_boxes_tree\"\nimport { registerCallback, unregisterCallback, pushState, replaceState, state } from \"src/decidim/history\"\nimport DataPicker from \"src/decidim/data_picker\"\n\nexport default class FormFilterComponent {\n  constructor($form) {\n    this.$form = $form;\n    this.id = this.$form.attr(\"id\") || this._getUID();\n    this.mounted = false;\n    this.changeEvents = true;\n    this.theCheckBoxesTree = new CheckBoxesTree();\n    this.theDataPicker = window.theDataPicker || new DataPicker($(\".data-picker\"));\n\n    this._updateInitialState();\n    this._onFormChange = delayed(this, this._onFormChange.bind(this));\n    this._onPopState = this._onPopState.bind(this);\n\n    if (window.Decidim.PopStateHandler) {\n      this.popStateSubmiter = false;\n    } else {\n      this.popStateSubmiter = true;\n      window.Decidim.PopStateHandler = this.id;\n    }\n  }\n\n  /**\n   * Handles the logic for unmounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  unmountComponent() {\n    if (this.mounted) {\n      this.mounted = false;\n      this.$form.off(\"change\", \"input, select\", this._onFormChange);\n\n      unregisterCallback(`filters-${this.id}`)\n    }\n  }\n\n  /**\n   * Handles the logic for mounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  mountComponent() {\n    if (this.$form.length > 0 && !this.mounted) {\n      this.mounted = true;\n      let queue = 0;\n\n      let contentContainer = $(this.$form.closest(\".filters\").parent().find(\".skip\").attr(\"href\"));\n      if (contentContainer.length === 0 && this.$form.data(\"remoteFill\")) {\n        contentContainer = this.$form.data(\"remoteFill\");\n      }\n      this.$form.on(\"change\", \"input:not([data-disable-dynamic-change]), select:not([data-disable-dynamic-change])\", this._onFormChange);\n\n      this.currentFormRequest = null;\n      this.$form.on(\"ajax:beforeSend\", (e) => {\n        if (this.currentFormRequest) {\n          this.currentFormRequest.abort();\n        }\n        this.currentFormRequest = e.originalEvent.detail[0];\n        queue += 1;\n        if (queue > 0 && contentContainer.length > 0 && !contentContainer.hasClass(\"spinner-container\")) {\n          contentContainer.addClass(\"spinner-container\");\n        }\n      });\n\n      this.$form.on(\"ajax:success\", () => {\n        queue -= 1;\n        if (queue <= 0 && contentContainer.length > 0) {\n          contentContainer.removeClass(\"spinner-container\");\n        }\n      });\n\n      this.$form.on(\"ajax:error\", () => {\n        queue -= 1;\n        if (queue <= 0 && contentContainer.length > 0) {\n          contentContainer.removeClass(\"spinner-container\");\n        }\n        this.$form.find(\".spinner-container\").addClass(\"hide\");\n      });\n\n      this.theCheckBoxesTree.setContainerForm(this.$form);\n\n      registerCallback(`filters-${this.id}`, (currentState) => {\n        this._onPopState(currentState);\n      });\n    }\n  }\n\n  /**\n   * Sets path in the browser history with the initial filters state, to allow to restoring it when using browser history.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _updateInitialState() {\n    const [initialPath, initialState] = this._currentStateAndPath();\n    initialState._path = initialPath\n    replaceState(null, initialState);\n  }\n\n  /**\n   * Finds the current location.\n   * @param {boolean} withHost - include the host part in the returned location\n   * @private\n   * @returns {String} - Returns the current location.\n   */\n  _getLocation(withHost = true) {\n    const currentState = state();\n    let path = \"\";\n\n    if (currentState && currentState._path) {\n      path = currentState._path;\n    } else {\n      path = window.location.pathname + window.location.search + window.location.hash;\n    }\n\n    if (withHost) {\n      return window.location.origin + path;\n    }\n    return path;\n  }\n\n  /**\n   * Parse current location and get filter values.\n   * @private\n   * @returns {Object} - An object where a key correspond to a filter field\n   *                     and the value is the current value for the filter.\n   */\n  _parseLocationFilterValues() {\n    // Every location param is constructed like this: filter[key]=value\n    let regexpResult = decodeURIComponent(this._getLocation()).match(/filter\\[([^\\]]*)\\](?:\\[\\])?=([^&]*)/g);\n\n    // The RegExp g flag returns null or an array of coincidences. It doesn't return the match groups\n    if (regexpResult) {\n      const filterParams = regexpResult.reduce((acc, result) => {\n        const [, key, array, value] = result.match(/filter\\[([^\\]]*)\\](\\[\\])?=([^&]*)/);\n        if (array) {\n          if (!acc[key]) {\n            acc[key] = [];\n          }\n          acc[key].push(value);\n        } else {\n          acc[key] = value;\n        }\n        return acc;\n      }, {});\n\n      return filterParams;\n    }\n\n    return null;\n  }\n\n  /**\n   * Parse current location and get the current order.\n   * @private\n   * @returns {string} - The current order\n   */\n  _parseLocationOrderValue() {\n    const url = this._getLocation();\n    const match = url.match(/order=([^&]*)/);\n    const $orderMenu = this.$form.find(\".order-by .menu\");\n    let order = $orderMenu.find(\".menu a:first\").data(\"order\");\n\n    if (match) {\n      order = match[1];\n    }\n\n    return order;\n  }\n\n  /**\n   * Clears the form to start with a clean state.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _clearForm() {\n    this.$form.find(\"input[type=checkbox]\").each((index, element) => {\n      element.checked = element.indeterminate = false;\n    });\n    this.$form.find(\"input[type=radio]\").attr(\"checked\", false);\n    this.$form.find(\".data-picker\").each((_index, picker) => {\n      this.theDataPicker.clear(picker);\n    });\n\n    // This ensure the form is reset in a valid state where a fieldset of\n    // radio buttons has the first selected.\n    this.$form.find(\"fieldset input[type=radio]:first\").each(function () {\n      // I need the this to iterate a jQuery collection\n      $(this)[0].checked = true; // eslint-disable-line no-invalid-this\n    });\n  }\n\n  /**\n   * Handles the logic when going back to a previous state in the filter form.\n   * @private\n   * @param {Object} currentState - state stored along with location URL\n   * @returns {Void} - Returns nothing.\n   */\n  _onPopState(currentState) {\n    this.changeEvents = false;\n    this._clearForm();\n\n    const filterParams = this._parseLocationFilterValues();\n    const currentOrder = this._parseLocationOrderValue();\n\n    this.$form.find(\"input.order_filter\").val(currentOrder);\n\n    if (filterParams) {\n      const fieldIds = Object.keys(filterParams);\n\n      // Iterate the filter params and set the correct form values\n      fieldIds.forEach((fieldName) => {\n        let value = filterParams[fieldName];\n\n        if (Array.isArray(value)) {\n          let checkboxes = this.$form.find(`input[type=checkbox][name=\"filter[${fieldName}][]\"]`);\n          this.theCheckBoxesTree.updateChecked(checkboxes, value);\n        } else {\n          this.$form.find(`*[name=\"filter[${fieldName}]\"]`).each((index, element) => {\n            switch (element.type) {\n            case \"hidden\":\n              break;\n            case \"radio\":\n            case \"checkbox\":\n              element.checked = value === element.value;\n              break;\n            default:\n              element.value = value;\n            }\n          });\n        }\n      });\n    }\n\n    // Retrieves picker information for selected values (value, text and link) from the state object\n    $(\".data-picker\", this.$form).each((_index, picker) => {\n      let pickerState = currentState[picker.id];\n      if (pickerState) {\n        this.theDataPicker.load(picker, pickerState);\n      }\n    })\n\n    // Only one instance should submit the form on browser history navigation\n    if (this.popStateSubmiter) {\n      Rails.fire(this.$form[0], \"submit\");\n    }\n\n    this.changeEvents = true;\n  }\n\n  /**\n   * Handles the logic to update the current location after a form change event.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _onFormChange() {\n    if (!this.changeEvents) {\n      return;\n    }\n\n    const [newPath, newState] = this._currentStateAndPath();\n    const path = this._getLocation(false);\n\n    if (newPath === path) {\n      return;\n    }\n\n    Rails.fire(this.$form[0], \"submit\");\n    pushState(newPath, newState);\n    this._saveFilters(newPath);\n  }\n\n  /**\n   * Calculates the path and the state associated to the filters inputs.\n   * @private\n   * @returns {Array} - Returns an array with the path and the state for the current filters state.\n   */\n  _currentStateAndPath() {\n    const formAction = this.$form.attr(\"action\");\n    const params = this.$form.find(\":not(.ignore-filters)\").find(\"select:not(.ignore-filter), input:not(.ignore-filter)\").serialize();\n\n    let path = \"\";\n    let currentState = {};\n\n    if (formAction.indexOf(\"?\") < 0) {\n      path = `${formAction}?${params}`;\n    } else {\n      path = `${formAction}&${params}`;\n    }\n\n    // Stores picker information for selected values (value, text and link) in the currentState object\n    $(\".data-picker\", this.$form).each((_index, picker) => {\n      currentState[picker.id] = this.theDataPicker.save(picker);\n    })\n\n    return [path, currentState];\n  }\n\n  /**\n   * Generates a unique identifier for the form.\n   * @private\n   * @returns {String} - Returns a unique identifier\n   */\n  _getUID() {\n    return `filter-form-${new Date().setUTCMilliseconds()}-${Math.floor(Math.random() * 10000000)}`;\n  }\n\n  /**\n   * Saves the changed filters on sessionStorage API.\n   * @private\n   * @param {string} pathWithQueryStrings - path with all the query strings for filter. To be used with backToListLink().\n   * @returns {Void} - Returns nothing.\n   */\n  _saveFilters(pathWithQueryStrings) {\n    if (!window.sessionStorage) {\n      return;\n    }\n\n    const pathName = this.$form.attr(\"action\");\n    sessionStorage.setItem(\"filteredParams\", JSON.stringify({[pathName]: pathWithQueryStrings}));\n  }\n\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds.\n * @param {Object} context - the context for the called function.\n * @param {Function} func - the function to be executed.\n * @param {int} wait - number of milliseconds to wait before executing the function.\n * @private\n * @returns {Void} - Returns nothing.\n */\nexport default function delayed(context, func, wait) {\n  let timeout = null;\n\n  return function(...args) {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      timeout = null;\n      Reflect.apply(func, context, args);\n    }, wait);\n  }\n}\n","/**\n * Luxembourgish localisation\n */\n;(function(jQuery) {\n  jQuery.fn.fdatepicker.dates.lb = {\n    days: [\"Sonndeg\", \"Méindeg\", \"Dënschdeg\", \"Mëttwoch\", \"Donneschdeg\", \"Freideg\", \"Samschdeg\", \"Sonndeg\"],\n    daysShort: [\"Son\", \"Méi\", \"Dën\", \"Mët\", \"Don\", \"Fre\", \"Sam\", \"Son\"],\n    daysMin: [\"So\", \"Mé\", \"Dë\", \"Më\", \"Do\", \"Fr\", \"Sa\", \"So\"],\n    months: [\"Januar\", \"Februar\", \"Mäerz\", \"Abrëll\", \"Mee\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n    monthsShort: [\"Jan\", \"Febr\", \"Mrz\", \"Abr\", \"Mee\", \"Jun\", \"Jul\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dez\"],\n    today: \"Haut\"\n  };\n}(jQuery));\n","$(() => {\n  $(\".gallery__container\").on(\"closed.zf.callout\", (event) => {\n    $(event.target).remove();\n  });\n});\n","/* eslint no-unused-vars: 0 */\nimport Tribute from \"src/decidim/vendor/tribute\"\n\n$(() => {\n  const $hashtagContainer = $(\".js-hashtags\");\n  const nodatafound = $hashtagContainer.attr(\"data-noresults\");\n\n  let noMatchTemplate = null\n  if (nodatafound) {\n    noMatchTemplate = () => `<li>${nodatafound}</li>`;\n  }\n\n  // Listener for the event triggered by quilljs\n  let cursor = \"\";\n  $hashtagContainer.on(\"quill-position\", function(event) {\n    if (event.detail !== null) {\n      // When replacing the text content after selecting a hashtag, we only need\n      // to know the hashtag's start position as that is the point which we want\n      // to replace.\n      let quill = event.target.__quill;\n      if (quill.getText(event.detail.index - 1, 1) === \"#\") {\n        cursor = event.detail.index;\n      }\n    }\n  });\n\n  /* eslint no-use-before-define: [\"error\", { \"variables\": false }]*/\n  let remoteSearch = function(text, cb) {\n    $.post(\"/api\", {query: `{hashtags(name:\"${text}\") {name}}`}).\n\n      then((response) => {\n        let data = response.data.hashtags || {};\n        cb(data)\n      }).fail(function() {\n        cb([])\n      }).always(() => {\n      // This function runs Tribute every single time you type something\n      // So we must evalute DOM properties after each\n        const $parent = $(tribute.current.element).parent()\n        $parent.addClass(\"is-active\")\n\n        // We need to move the container to the wrapper selected\n        const $tribute = $parent.find(\".tribute-container\");\n        // Remove the inline styles, relative to absolute positioning\n        $tribute.removeAttr(\"style\");\n      })\n  };\n\n  // tribute.js docs - http://github.com/zurb/tribute\n  /* global Tribute*/\n  let tribute = new Tribute({\n    trigger: \"#\",\n    values: function (text, cb) {\n      remoteSearch(text, (hashtags) => cb(hashtags));\n    },\n    positionMenu: true,\n    menuContainer: null,\n    fillAttr: \"name\",\n    noMatchTemplate: noMatchTemplate,\n    lookup: (item) => item.name,\n    selectTemplate: function(item) {\n      if (typeof item === \"undefined\") {\n        return null;\n      }\n      if (this.range.isContentEditable(this.current.element)) {\n        // Check quill.js\n        if ($(this.current.element).hasClass(\"ql-editor\")) {\n          let editorContainer = $(this.current.element).parent().get(0);\n          let quill = editorContainer.__quill;\n          quill.insertText(cursor - 1, `#${item.original.name} `, Quill.sources.API);\n          // cursor position + hashtag length + \"#\" sign + space\n          let position = cursor + item.original.name.length + 2;\n\n          let next = 0;\n          if (quill.getLength() > position) {\n            next = position\n          } else {\n            next = quill.getLength() - 1\n          }\n          // Workaround https://github.com/quilljs/quill/issues/731\n          setTimeout(function () {\n            quill.setSelection(next, 0);\n          }, 500);\n\n          return \"\"\n        }\n        return `<span contenteditable=\"false\">#${item.original.name}</span>`;\n      }\n      return `#${item.original.name}`;\n    },\n    menuItemTemplate: function(item) {\n      let tpl = `<strong>${item.original.name}</strong>`;\n      return tpl;\n    }\n  });\n\n  // Tribute needs to be attached to the `.ql-editor` element as said at:\n  // https://github.com/quilljs/quill/issues/1816\n  //\n  // For this reason we need to wait a bit for quill to initialize itself.\n  setTimeout(function() {\n    $hashtagContainer.each((index, item) => {\n      let $qlEditor = $(\".ql-editor\", item);\n      if ($qlEditor.length > 0) {\n        tribute.attach($qlEditor);\n      } else {\n        tribute.attach(item);\n      }\n    });\n  }, 1000);\n\n  // DOM manipulation\n  $hashtagContainer.on(\"focusin\", (event) => {\n    // Set the parent container relative to the current element\n\n    tribute.menuContainer = event.target.parentNode;\n  });\n  $hashtagContainer.on(\"focusout\", (event) => {\n    let $parent = $(event.target).parent();\n\n    if ($parent.hasClass(\"is-active\")) {\n      $parent.removeClass(\"is-active\");\n    }\n  });\n  $hashtagContainer.on(\"input\", (event) => {\n    let $parent = $(event.target).parent();\n\n    if (tribute.isActive) {\n      // We need to move the container to the wrapper selected\n      let $tribute = $(\".tribute-container\");\n      $tribute.appendTo($parent);\n      // Parent adaptation\n      $parent.addClass(\"is-active\");\n    } else {\n      $parent.removeClass(\"is-active\");\n    }\n  });\n});\n","/* eslint no-unused-vars: 0 */\nimport Tribute from \"src/decidim/vendor/tribute\"\n\n$(() => {\n  const $mentionContainer = $(\".js-mentions\");\n  const nodatafound = $mentionContainer.attr(\"data-noresults\");\n\n  let noMatchTemplate = null\n  if (nodatafound) {\n    noMatchTemplate = () => `<li>${nodatafound}</li>`;\n  }\n\n  // Listener for the event triggered by quilljs\n  let cursor = \"\";\n  $mentionContainer.on(\"quill-position\", (event) => {\n    if (event.detail !== null) {\n      // When replacing the text content after selecting a hashtag, we only need\n      // to know the hashtag's start position as that is the point which we want\n      // to replace.\n      let quill = event.target.__quill;\n      if (quill.getText(event.detail.index - 1, 1) === \"@\") {\n        cursor = event.detail.index;\n      }\n    }\n  });\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds\n  /* eslint no-invalid-this: 0 */\n  /* eslint consistent-this: 0 */\n  /* eslint prefer-reflect: 0 */\n  const debounce = function(callback, wait) {\n    let timeout = null;\n    return (...args) => {\n      const context = this;\n      clearTimeout(timeout);\n      timeout = setTimeout(() => callback.apply(context, args), wait);\n    };\n  }\n\n  /* eslint no-use-before-define: [\"error\", { \"variables\": false }]*/\n  let remoteSearch = function(text, cb) {\n    let query = `{users(filter:{wildcard:\"${text}\"}){nickname,name,avatarUrl,__typename,...on UserGroup{membersCount}}}`;\n    $.post(\"/api\", {query: query}).\n      then((response) => {\n        let data = response.data.users || {};\n        cb(data)\n      }).fail(function() {\n        cb([])\n      }).always(() => {\n      // This function runs Tribute every single time you type something\n      // So we must evalute DOM properties after each\n        const $parent = $(tribute.current.element).parent();\n        $parent.addClass(\"is-active\");\n\n        // We need to move the container to the wrapper selected\n        const $tribute = $parent.find(\".tribute-container\");\n        // Remove the inline styles, relative to absolute positioning\n        $tribute.removeAttr(\"style\");\n      })\n  };\n\n  // tribute.js docs - http://github.com/zurb/tribute\n  /* global Tribute*/\n  let tribute = new Tribute({\n    trigger: \"@\",\n    // avoid overloading the API if the user types too fast\n    values: debounce(function (text, cb) {\n      remoteSearch(text, (users) => cb(users));\n    }, 250),\n    positionMenu: true,\n    menuContainer: null,\n    allowSpaces: true,\n    menuItemLimit: 5,\n    fillAttr: \"nickname\",\n    selectClass: \"highlight\",\n    noMatchTemplate: noMatchTemplate,\n    lookup: (item) => item.nickname + item.name,\n    selectTemplate: function(item) {\n      if (typeof item === \"undefined\") {\n        return null;\n      }\n      if (this.range.isContentEditable(this.current.element)) {\n        // Check quill.js\n        if ($(this.current.element).hasClass(\"ql-editor\")) {\n          let editorContainer = $(this.current.element).parent().get(0);\n          let quill = editorContainer.__quill;\n          quill.insertText(cursor - 1, `${item.original.nickname} `, Quill.sources.API);\n          // cursor position + nickname length + \"@\" sign + space\n          let position = cursor + item.original.nickname.length + 2\n\n          let next = 0;\n          if (quill.getLength() > position) {\n            next = position\n          } else {\n            next = quill.getLength() - 1\n          }\n          // Workaround https://github.com/quilljs/quill/issues/731\n          setTimeout(function () {\n            quill.setSelection(next, 0);\n          }, 500);\n\n          return \"\"\n        }\n        return `<span contenteditable=\"false\">${item.original.nickname}</span>`;\n      }\n      return item.original.nickname;\n    },\n    menuItemTemplate: function(item) {\n      let svg = \"\";\n      if (window.Decidim && item.original.__typename === \"UserGroup\") {\n        const iconsPath =  window.Decidim.config.get(\"icons_path\");\n\n        svg = `<span class=\"is-group\">${item.original.membersCount}x <svg class=\"icon--members icon\"><use href=\"${iconsPath}#icon-members\"/></svg></span>`;\n      }\n      return `<div class=\"tribute-item ${item.original.__typename}\">\n      <span class=\"author__avatar\"><img src=\"${item.original.avatarUrl}\" alt=\"author-avatar\"></span>\n        <strong>${item.original.nickname}</strong>\n        <small>${item.original.name}</small>\n        ${svg}\n      </div>`;\n    }\n  });\n\n  let setupEvents = function($element) {\n    // DOM manipulation\n    $element.on(\"focusin\", (event) => {\n      // Set the parent container relative to the current element\n      tribute.menuContainer = event.target.parentNode;\n    });\n    $element.on(\"focusout\", (event) => {\n      let $parent = $(event.target).parent();\n\n      if ($parent.hasClass(\"is-active\")) {\n        $parent.removeClass(\"is-active\");\n      }\n    });\n    $element.on(\"input\", (event) => {\n      let $parent = $(event.target).parent();\n\n      if (tribute.isActive) {\n        // We need to move the container to the wrapper selected\n        let $tribute = $(\".tribute-container\");\n        $tribute.appendTo($parent);\n\n        // Parent adaptation\n        $parent.addClass(\"is-active\");\n      } else {\n        $parent.removeClass(\"is-active\");\n      }\n    });\n  };\n\n  setupEvents($mentionContainer);\n\n  // This allows external libraries (like React) to use the component\n  // by simply firing and event targeting the element where to attach Tribute\n  $(document).on(\"attach-mentions-element\", (event, element) => {\n    if (!element) {\n      return;\n    }\n    tribute.attach(element);\n    // Due a bug in Tribute, re-add menu to DOM if it has been removed\n    // See https://github.com/zurb/tribute/issues/140\n    if (tribute.menu && !document.body.contains(tribute.menu)) {\n      tribute.range.getDocument().body.appendChild(tribute.menu);\n    }\n    setupEvents($(element));\n  });\n\n  // tribute.attach($mentionContainer);\n  // Tribute needs to be attached to the `.ql-editor` element as said at:\n  // https://github.com/quilljs/quill/issues/1816\n  //\n  // For this reason we need to wait a bit for quill to initialize itself.\n  setTimeout(function() {\n    $mentionContainer.each((index, item) => {\n      let $qlEditor = $(\".ql-editor\", item);\n      if ($qlEditor.length > 0) {\n        tribute.attach($qlEditor);\n      } else {\n        tribute.attach(item);\n      }\n    });\n  }, 1000);\n});\n\n","import dayjs from \"dayjs\"\n\n$(() => {\n  let sessionTimeOutEnabled = true;\n  const $timeoutModal = $(\"#timeoutModal\");\n  const timeoutInSeconds = parseInt($timeoutModal.data(\"session-timeout\"), 10);\n  const secondsUntilTimeoutPath = $timeoutModal.data(\"seconds-until-timeout-path\");\n  const heartbeatPath = $timeoutModal.data(\"heartbeat-path\");\n  const interval = parseInt($timeoutModal.data(\"session-timeout-interval\"), 10);\n  const preventTimeOutSeconds = $timeoutModal.data(\"prevent-timeout-seconds\");\n  let endsAt = dayjs().add(timeoutInSeconds, \"seconds\");\n  let lastAction = dayjs();\n  const $continueSessionButton = $(\"#continueSession\");\n  let lastActivityCheck = dayjs();\n  // 5 * 60 seconds = 5 Minutes\n  const activityCheckInterval = 5 * 60;\n  const preventTimeOutUntil = dayjs().add(preventTimeOutSeconds, \"seconds\");\n\n  // Ajax request is made at timeout_modal.html.erb\n  $continueSessionButton.on(\"click\", () => {\n    $timeoutModal.foundation(\"close\");\n    // In admin panel we have to hide all overlays\n    $(\".reveal-overlay\").css(\"display\", \"none\");\n    lastActivityCheck = dayjs();\n  })\n\n  if (isNaN(interval)) {\n    return;\n  }\n  if (!timeoutInSeconds) {\n    return;\n  }\n\n  const disableSessionTimeout = () => {\n    sessionTimeOutEnabled = false;\n  }\n\n  const enableSessionTimeout = () => {\n    sessionTimeOutEnabled = true;\n  }\n\n  const setTimer = (secondsUntilExpiration) => {\n    if (!secondsUntilExpiration) {\n      return;\n    }\n    endsAt = dayjs().add(secondsUntilExpiration, \"seconds\");\n  }\n\n  const sessionTimeLeft = () => {\n    return $.ajax({\n      method: \"GET\",\n      url: secondsUntilTimeoutPath,\n      contentType: \"application/json\",\n      headers: {\n        \"X-CSRF-Token\": $(\"meta[name=csrf-token]\").attr(\"content\")\n      }\n    });\n  }\n\n  const heartbeat = () => {\n    return $.ajax({\n      method: \"POST\",\n      url: heartbeatPath,\n      contentType: \"application/javascript\"\n    });\n  }\n\n  const userBeenActiveSince = (seconds) => {\n    return (dayjs() - lastAction) / 1000 < seconds;\n  }\n\n  const exitInterval = setInterval(() => {\n    const timeSinceLastActivityCheckInSeconds = Math.round((dayjs() - lastActivityCheck) / 1000);\n\n    const popupOpen = $(\"#timeoutModal\").parent().css(\"display\") === \"block\";\n    if (!popupOpen && timeSinceLastActivityCheckInSeconds >= activityCheckInterval) {\n      lastActivityCheck = dayjs();\n      if (userBeenActiveSince(activityCheckInterval)) {\n        heartbeat();\n        return;\n      }\n    }\n\n    const timeRemaining = Math.round((endsAt - dayjs()) / 1000);\n    if (timeRemaining > 170) {\n      return;\n    }\n\n    if (dayjs() < preventTimeOutUntil) {\n      heartbeat();\n      return;\n    }\n\n    sessionTimeLeft().then((result) => {\n      const secondsUntilSessionExpires = result.seconds_remaining;\n      setTimer(secondsUntilSessionExpires);\n\n      if (!sessionTimeOutEnabled) {\n        heartbeat();\n      } else if (secondsUntilSessionExpires <= 90) {\n        $timeoutModal.find(\"#reveal-hidden-sign-out\")[0].click();\n      } else if (secondsUntilSessionExpires <= 150) {\n        $timeoutModal.foundation(\"open\");\n      }\n    });\n  }, interval);\n\n  $(document).mousemove(() => {\n    lastAction = dayjs();\n  })\n  $(document).scroll(() => {\n    lastAction = dayjs();\n  })\n  $(document).keypress(() => {\n    lastAction = dayjs();\n  })\n\n  // Devise restarts its own timer on ajax requests,\n  // so here we restart our.\n  $(document).on(\"ajax:complete\", () => {\n    setTimer(timeoutInSeconds);\n  });\n\n  $(document).ajaxComplete((_event, _xhr, settings) => {\n    if (settings && settings.url === secondsUntilTimeoutPath) {\n      return;\n    }\n    setTimer(timeoutInSeconds);\n  });\n\n  window.addEventListener(\"beforeunload\", () => {\n    clearInterval(exitInterval);\n    return;\n  });\n\n  window.Decidim.enableSessionTimeout = enableSessionTimeout\n  window.Decidim.disableSessionTimeout = disableSessionTimeout\n});\n","/* eslint-disable */\n\n/* =========================================================\n * foundation-datepicker.js\n * Copyright 2015 Peter Beno, najlepsiwebdesigner@gmail.com, @benopeter\n * project website http://foundation-datepicker.peterbeno.com\n * ========================================================= */\n\n// This file is a modified version of the original file\n// See\n//  - https://github.com/decidim/decidim/pull/1207\n//  - https://github.com/decidim/decidim/pull/2512\n//  - https://github.com/decidim/decidim/pull/3515\n\n!(function($) {\n\n  function UTCDate() {\n    return new Date(Date.UTC(...arguments));\n  }\n\n  function UTCToday() {\n    let today = new Date();\n    return UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate());\n  }\n\n  let Datepicker = function(element, options) {\n    let that = this;\n\n    this.element = $(element);\n    this.autoShow = (options.autoShow == undefined ? true : options.autoShow);\n    this.appendTo = options.appendTo || \"body\";\n    this.closeButton = options.closeButton;\n    this.language = options.language || this.element.data(\"date-language\") || \"en\";\n    this.language = this.language in dates ? this.language : this.language.split(\"-\")[0]; // Check if \"de-DE\" style date is available, if not language should fallback to 2 letter code eg \"de\"\n    this.language = this.language in dates ? this.language : \"en\";\n    this.isRTL = dates[this.language].rtl || false;\n    this.format = DPGlobal.parseFormat(options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\");\n    this.formatText = options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\";\n    this.isInline = false;\n    this.isInput = this.element.is(\"input\");\n    this.component = this.element.is(\".date\") ? this.element.find(\".prefix, .postfix\") : false;\n    this.hasInput = this.component && this.element.find(\"input\").length;\n    this.disableDblClickSelection = options.disableDblClickSelection;\n    this.onRender = options.onRender || function() {};\n    if (this.component && this.component.length === 0) {\n      this.component = false;\n    }\n    this.linkField = options.linkField || this.element.data(\"link-field\") || false;\n    this.linkFormat = DPGlobal.parseFormat(options.linkFormat || this.element.data(\"link-format\") || \"yyyy-mm-dd hh:ii:ss\");\n    this.minuteStep = options.minuteStep || this.element.data(\"minute-step\") || 5;\n    this.pickerPosition = options.pickerPosition || this.element.data(\"picker-position\") || \"bottom-right\";\n    this.initialDate = options.initialDate || null;\n    this.faCSSprefix = options.faCSSprefix || \"fa\";\n    this.leftArrow = options.leftArrow || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-chevron-left fi-arrow-left\"/>`;\n    this.rightArrow = options.rightArrow || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-chevron-right fi-arrow-right\"/>`;\n    this.closeIcon = options.closeIcon || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-remove ${this.faCSSprefix}-times fi-x\"></i>`;\n\n\n    this.minView = 0;\n    if (\"minView\" in options) {\n      this.minView = options.minView;\n    } else if (\"minView\" in this.element.data()) {\n      this.minView = this.element.data(\"min-view\");\n    }\n    this.minView = DPGlobal.convertViewMode(this.minView);\n\n    this.maxView = DPGlobal.modes.length - 1;\n    if (\"maxView\" in options) {\n      this.maxView = options.maxView;\n    } else if (\"maxView\" in this.element.data()) {\n      this.maxView = this.element.data(\"max-view\");\n    }\n    this.maxView = DPGlobal.convertViewMode(this.maxView);\n\n    this.startViewMode = \"month\";\n    if (\"startView\" in options) {\n      this.startViewMode = options.startView;\n    } else if (\"startView\" in this.element.data()) {\n      this.startViewMode = this.element.data(\"start-view\");\n    }\n    this.startViewMode = DPGlobal.convertViewMode(this.startViewMode);\n    this.viewMode = this.startViewMode;\n\n    if (!(\"minView\" in options) && !(\"maxView\" in options) && !(this.element.data(\"min-view\")) && !(this.element.data(\"max-view\"))) {\n      this.pickTime = false;\n      if (\"pickTime\" in options) {\n        this.pickTime = options.pickTime;\n      }\n      if (this.pickTime == true) {\n        this.minView = 0;\n        this.maxView = 4;\n      } else {\n        this.minView = 2;\n        this.maxView = 4;\n      }\n    }\n\n    this.forceParse = true;\n    if (\"forceParse\" in options) {\n      this.forceParse = options.forceParse;\n    } else if (\"dateForceParse\" in this.element.data()) {\n      this.forceParse = this.element.data(\"date-force-parse\");\n    }\n\n\n    this.picker = $(DPGlobal.template(this.leftArrow, this.rightArrow, this.closeIcon)).\n      appendTo(this.isInline ? this.element : this.appendTo).\n      on({\n        click: $.proxy(this.click, this),\n        mousedown: $.proxy(this.mousedown, this)\n      });\n    if (this.closeButton) {\n      this.picker.find(\"a.datepicker-close\").show();\n    } else {\n      this.picker.find(\"a.datepicker-close\").hide();\n    }\n\n    if (this.isInline) {\n      this.picker.addClass(\"datepicker-inline\");\n    } else {\n      this.picker.addClass(\"datepicker-dropdown dropdown-menu\");\n    }\n    if (this.isRTL) {\n      this.picker.addClass(\"datepicker-rtl\");\n\n      this.picker.find(\".date-switch\").each(function() {\n        $(this).parent().prepend($(this).siblings(\".next\"));\n        $(this).parent().append($(this).siblings(\".prev\"));\n      })\n      this.picker.find(\".prev, .next\").toggleClass(\"prev next\");\n\n    }\n    $(document).on(\"mousedown\", function(e) {\n      if (that.isInput && e.target === that.element[0]) {\n        return;\n      }\n\n      // Clicked outside the datepicker, hide it\n      if ($(e.target).closest(\".datepicker.datepicker-inline, .datepicker.datepicker-dropdown\").length === 0) {\n        that.hide();\n      }\n    });\n\n    this.autoclose = true;\n    if (\"autoclose\" in options) {\n      this.autoclose = options.autoclose;\n    } else if (\"dateAutoclose\" in this.element.data()) {\n      this.autoclose = this.element.data(\"date-autoclose\");\n    }\n\n    this.keyboardNavigation = true;\n    if (\"keyboardNavigation\" in options) {\n      this.keyboardNavigation = options.keyboardNavigation;\n    } else if (\"dateKeyboardNavigation\" in this.element.data()) {\n      this.keyboardNavigation = this.element.data(\"date-keyboard-navigation\");\n    }\n\n    this.todayBtn = (options.todayBtn || this.element.data(\"date-today-btn\") || false);\n    this.todayHighlight = (options.todayHighlight || this.element.data(\"date-today-highlight\") || false);\n\n    this.calendarWeeks = false;\n    if (\"calendarWeeks\" in options) {\n      this.calendarWeeks = options.calendarWeeks;\n    } else if (\"dateCalendarWeeks\" in this.element.data()) {\n      this.calendarWeeks = this.element.data(\"date-calendar-weeks\");\n    }\n    if (this.calendarWeeks)\n    {this.picker.find(\"tfoot th.today\").\n      attr(\"colspan\", function(i, val) {\n        return parseInt(val) + 1;\n      });}\n\n    this.weekStart = ((options.weekStart || this.element.data(\"date-weekstart\") || dates[this.language].weekStart || 0) % 7);\n    this.weekEnd = ((this.weekStart + 6) % 7);\n    this.startDate = -Infinity;\n    this.endDate = Infinity;\n    this.daysOfWeekDisabled = [];\n    this.datesDisabled = [];\n    this.setStartDate(options.startDate || this.element.data(\"date-startdate\"));\n    this.setEndDate(options.endDate || this.element.data(\"date-enddate\"));\n    this.setDaysOfWeekDisabled(options.daysOfWeekDisabled || this.element.data(\"date-days-of-week-disabled\"));\n    this.setDatesDisabled(options.datesDisabled || this.element.data(\"dates-disabled\"));\n\n    if (this.initialDate != null) {\n      this.date = this.viewDate = DPGlobal.parseDate(this.initialDate, this.format, this.language);\n      this.setValue();\n    }\n\n    this.fillDow();\n    this.fillMonths();\n    this.update();\n\n    this.showMode();\n\n    if (this.isInline) {\n      this.show();\n    }\n\n    this._attachEvents();\n  };\n\n  Datepicker.prototype = {\n    constructor: Datepicker,\n\n    _events: [],\n    _attachEvents: function() {\n      this._detachEvents();\n      if (this.isInput) { // single input\n        if (!this.keyboardNavigation) {\n          this._events = [\n            [this.element, {\n              focus: (this.autoShow) ? $.proxy(this.show, this) : function() {}\n            }]\n          ];\n        } else {\n          this._events = [\n            [this.element, {\n              focus: (this.autoShow) ? $.proxy(this.show, this) : function() {},\n              keyup: $.proxy(this.update, this),\n              keydown: $.proxy(this.keydown, this),\n              click: (this.element.attr(\"readonly\")) ? $.proxy(this.show, this) : function() {}\n            }]\n          ];\n        }\n      }\n      else if (this.component && this.hasInput) { // component: input + button\n        this._events = [\n          // For components that are not readonly, allow keyboard nav\n          [this.element.find(\"input\"), {\n            focus: (this.autoShow) ? $.proxy(this.show, this) : function() {},\n            keyup: $.proxy(this.update, this),\n            keydown: $.proxy(this.keydown, this)\n          }],\n          [this.component, {\n            click: $.proxy(this.show, this)\n          }]\n        ];\n      } else if (this.element.is(\"div\")) { // inline datepicker\n        this.isInline = true;\n      } else {\n        this._events = [\n          [this.element, {\n            click: $.proxy(this.show, this)\n          }]\n        ];\n      }\n\n      if (this.disableDblClickSelection) {\n        this._events[this._events.length] = [\n          this.element, {\n            dblclick: function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              $(this).blur()\n            }\n          }\n        ];\n      }\n\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.on(ev);\n      }\n    },\n    _detachEvents: function() {\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.off(ev);\n      }\n      this._events = [];\n    },\n\n    show: function(e) {\n      this.picker.show();\n      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\n      this.update();\n      this.place();\n      $(window).on(\"resize\", $.proxy(this.place, this));\n      if (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      this.element.trigger({\n        type: \"show\",\n        date: this.date\n      });\n    },\n\n    hide: function(e) {\n      if (this.isInline) {return;}\n      if (!this.picker.is(\":visible\")) {return;}\n      this.picker.hide();\n      $(window).off(\"resize\", this.place);\n      this.viewMode = this.startViewMode;\n      this.showMode();\n      if (!this.isInput) {\n        $(document).off(\"mousedown\", this.hide);\n      }\n\n      if (\n        this.forceParse &&\n                (\n                  this.isInput && this.element.val() ||\n                    this.hasInput && this.element.find(\"input\").val()\n                )\n      )\n      {this.setValue();}\n      this.element.trigger({\n        type: \"hide\",\n        date: this.date\n      });\n    },\n\n    remove: function() {\n      this._detachEvents();\n      this.picker.remove();\n      delete this.element.data().datepicker;\n    },\n\n    getDate: function() {\n      let d = this.getUTCDate();\n      return new Date(d.getTime() + (d.getTimezoneOffset() * 60000));\n    },\n\n    getUTCDate: function() {\n      return this.date;\n    },\n\n    setDate: function(d) {\n      this.setUTCDate(new Date(d.getTime() - (d.getTimezoneOffset() * 60000)));\n    },\n\n    setUTCDate: function(d) {\n      this.date = d;\n      this.setValue();\n    },\n\n    setValue: function() {\n      let formatted = this.getFormattedDate();\n      if (!this.isInput) {\n        if (this.component) {\n          this.element.find(\"input\").val(formatted);\n        }\n        this.element.data(\"date\", formatted);\n      } else {\n        this.element.val(formatted);\n      }\n    },\n\n    getFormattedDate: function(format) {\n      if (format === undefined)\n      {format = this.format;}\n      return DPGlobal.formatDate(this.date, format, this.language);\n    },\n\n    setStartDate: function(startDate) {\n      this.startDate = startDate || -Infinity;\n      if (this.startDate !== -Infinity) {\n        this.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language);\n      }\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setEndDate: function(endDate) {\n      this.endDate = endDate || Infinity;\n      if (this.endDate !== Infinity) {\n        this.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language);\n      }\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setDaysOfWeekDisabled: function(daysOfWeekDisabled) {\n      this.daysOfWeekDisabled = daysOfWeekDisabled || [];\n      if (!$.isArray(this.daysOfWeekDisabled)) {\n        this.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\\s*/);\n      }\n      this.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function(d) {\n        return parseInt(d, 10);\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setDatesDisabled: function(datesDisabled) {\n      this.datesDisabled = datesDisabled || [];\n      if (!$.isArray(this.datesDisabled)) {\n        this.datesDisabled = this.datesDisabled.split(/,\\s*/);\n      }\n      this.datesDisabled = $.map(this.datesDisabled, function(d) {\n        return DPGlobal.parseDate(d, this.format, this.language).valueOf();\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n\n    place: function() {\n      if (this.isInline) {return;}\n      let zIndexes = [];\n      this.element.parents().map(function() {\n        if ($(this).css(\"z-index\") != \"auto\") {\n          zIndexes.push(parseInt($(this).css(\"z-index\")));\n        }\n      });\n      let zIndex = zIndexes.sort(function(a, b) { return a - b; }).pop() + 10;\n      let textbox = this.component ? this.component : this.element;\n      let offset = textbox.offset();\n      let height = textbox.outerHeight() + parseInt(textbox.css(\"margin-top\"));\n      let width = textbox.outerWidth() + parseInt(textbox.css(\"margin-left\"));\n      let fullOffsetTop = offset.top + height;\n      let offsetLeft = offset.left;\n      this.picker.removeClass(\"datepicker-top datepicker-bottom\");\n      // can we show it on top?\n      let canShowTop = ($(window).scrollTop() < offset.top - this.picker.outerHeight());\n      let canShowBottom = (fullOffsetTop + this.picker.outerHeight()) < $(window).scrollTop() + $(window).height();\n      // If the datepicker is going to be below the window, show it on top of the input if it fits\n      if (!canShowBottom && canShowTop) {\n        fullOffsetTop = offset.top - this.picker.outerHeight();\n        this.picker.addClass(\"datepicker-top\");\n      }\n      else {\n        // Scroll up if we cannot show it on bottom or top (for mobile devices)\n        if (!canShowBottom) {$(window).scrollTop(offset.top);}\n        this.picker.addClass(\"datepicker-bottom\");\n      }\n\n      // if the datepicker is going to go past the right side of the window, we want\n      // to set the right position so the datepicker lines up with the textbox\n      if (offset.left + this.picker.width() >= $(window).width()) {\n        offsetLeft = (offset.left + width) - this.picker.width();\n      }\n      this.picker.css({\n        top: fullOffsetTop,\n        left: offsetLeft,\n        zIndex: zIndex\n      });\n    },\n\n    update: function() {\n      let date,\n          fromArgs = false;\n      let currentVal = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      if (arguments && arguments.length && (typeof arguments[0] === \"string\" || arguments[0] instanceof Date)) {\n        date = arguments[0];\n        fromArgs = true;\n      }\n      else {\n        date = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      }\n\n      this.date = DPGlobal.parseDate(date, this.format, this.language);\n\n      if (fromArgs) {\n        this.setValue();\n      } else if (currentVal == \"\") {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: null\n        });\n      }\n\n      if (this.date < this.startDate) {\n        this.viewDate = new Date(this.startDate.valueOf());\n      } else if (this.date > this.endDate) {\n        this.viewDate = new Date(this.endDate.valueOf());\n      } else {\n        this.viewDate = new Date(this.date.valueOf());\n      }\n      this.fill();\n    },\n\n    fillDow: function() {\n      let dowCnt = this.weekStart,\n          html = \"<tr>\";\n      if (this.calendarWeeks) {\n        let cell = '<th class=\"cw\">&nbsp;</th>';\n        html += cell;\n        this.picker.find(\".datepicker-days thead tr:first-child\").prepend(cell);\n      }\n      while (dowCnt < this.weekStart + 7) {\n        html += `<th class=\"dow\">${dates[this.language].daysMin[(dowCnt++) % 7]}</th>`;\n      }\n      html += \"</tr>\";\n      this.picker.find(\".datepicker-days thead\").append(html);\n    },\n\n    fillMonths: function() {\n      let html = \"\",\n          i = 0;\n      while (i < 12) {\n        html += `<span class=\"month\">${dates[this.language].monthsShort[i++]}</span>`;\n      }\n      this.picker.find(\".datepicker-months td\").html(html);\n    },\n\n    fill: function() {\n      if (this.date == null || this.viewDate == null) {\n        return;\n      }\n\n      let d = new Date(this.viewDate.valueOf()),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          dayMonth = d.getUTCDate(),\n          hours = d.getUTCHours(),\n          minutes = d.getUTCMinutes(),\n          startYear = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity,\n          startMonth = this.startDate !== -Infinity ? this.startDate.getUTCMonth() : -Infinity,\n          endYear = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity,\n          endMonth = this.endDate !== Infinity ? this.endDate.getUTCMonth() : Infinity,\n          currentDate = this.date && UTCDate(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate()).valueOf(),\n          today = new Date(),\n          titleFormat = dates[this.language].titleFormat || dates.en.titleFormat;\n      // this.picker.find('.datepicker-days thead th.date-switch')\n      //          .text(DPGlobal.formatDate(new UTCDate(year, month), titleFormat, this.language));\n\n      this.picker.find(\".datepicker-days thead th:eq(1)\").\n        text(`${dates[this.language].months[month]} ${year}`);\n      this.picker.find(\".datepicker-hours thead th:eq(1)\").\n        text(`${dayMonth} ${dates[this.language].months[month]} ${year}`);\n      this.picker.find(\".datepicker-minutes thead th:eq(1)\").\n        text(`${dayMonth} ${dates[this.language].months[month]} ${year}`);\n\n\n      this.picker.find(\"tfoot th.today\").\n        text(dates[this.language].today).\n        toggle(this.todayBtn !== false);\n      this.updateNavArrows();\n      this.fillMonths();\n      let prevMonth = UTCDate(year, month - 1, 28, 0, 0, 0, 0),\n          day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\n      prevMonth.setUTCDate(day);\n      prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);\n      let nextMonth = new Date(prevMonth.valueOf());\n      nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\n      nextMonth = nextMonth.valueOf();\n      let html = [];\n      let clsName;\n      while (prevMonth.valueOf() < nextMonth) {\n        if (prevMonth.getUTCDay() == this.weekStart) {\n          html.push(\"<tr>\");\n          if (this.calendarWeeks) {\n            // adapted from https://github.com/timrwood/moment/blob/master/moment.js#L128\n            let a = new Date(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth(), prevMonth.getUTCDate() - prevMonth.getDay() + 10 - (this.weekStart && this.weekStart % 7 < 5 && 7)),\n                b = new Date(a.getFullYear(), 0, 4),\n                calWeek = ~~((a - b) / 864e5 / 7 + 1.5);\n            html.push(`<td class=\"cw\">${calWeek}</td>`);\n          }\n        }\n        clsName = ` ${this.onRender(prevMonth)} `;\n        if (prevMonth.getUTCFullYear() < year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() < month)) {\n          clsName += \" old\";\n        } else if (prevMonth.getUTCFullYear() > year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() > month)) {\n          clsName += \" new\";\n        }\n        // Compare internal UTC date with local today, not UTC today\n        if (this.todayHighlight &&\n                    prevMonth.getUTCFullYear() == today.getFullYear() &&\n                    prevMonth.getUTCMonth() == today.getMonth() &&\n                    prevMonth.getUTCDate() == today.getDate()) {\n          clsName += \" today\";\n        }\n        if (currentDate && prevMonth.valueOf() == currentDate) {\n          clsName += \" active\";\n        }\n        if (prevMonth.valueOf() < this.startDate || prevMonth.valueOf() > this.endDate ||\n                    $.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1 ||\n                    $.inArray(prevMonth.valueOf(), this.datesDisabled) !== -1) {\n          clsName += \" disabled\";\n        }\n        html.push(`<td class=\"day${clsName}\">${prevMonth.getUTCDate()}</td>`);\n        if (prevMonth.getUTCDay() == this.weekEnd) {\n          html.push(\"</tr>\");\n        }\n        prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\n      }\n      this.picker.find(\".datepicker-days tbody\").empty().append(html.join(\"\"));\n\n      html = [];\n      for (var i = 0; i < 24; i++) {\n        var actual = UTCDate(year, month, dayMonth, i);\n        clsName = \"\";\n        // We want the previous hour for the startDate\n        if ((actual.valueOf() + 3600000) < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (hours == i) {\n          clsName += \" active\";\n        }\n        html.push(`<span class=\"hour${clsName}\">${i}:00</span>`);\n      }\n      this.picker.find(\".datepicker-hours td\").html(html.join(\"\"));\n\n      html = [];\n      for (var i = 0; i < 60; i += this.minuteStep) {\n        var actual = UTCDate(year, month, dayMonth, hours, i);\n        clsName = \"\";\n        if (actual.valueOf() < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (Math.floor(minutes / this.minuteStep) == Math.floor(i / this.minuteStep)) {\n          clsName += \" active\";\n        }\n        html.push(`<span class=\"minute${clsName}\">${hours}:${i < 10 ? `0${i}` : i}</span>`);\n      }\n      this.picker.find(\".datepicker-minutes td\").html(html.join(\"\"));\n\n\n      let currentYear = this.date && this.date.getUTCFullYear();\n      let months = this.picker.find(\".datepicker-months\").\n        find(\"th:eq(1)\").\n        text(year).\n        end().\n        find(\"span\").removeClass(\"active\");\n      if (currentYear && currentYear == year) {\n        months.eq(this.date.getUTCMonth()).addClass(\"active\");\n      }\n      if (year < startYear || year > endYear) {\n        months.addClass(\"disabled\");\n      }\n      if (year == startYear) {\n        months.slice(0, startMonth).addClass(\"disabled\");\n      }\n      if (year == endYear) {\n        months.slice(endMonth + 1).addClass(\"disabled\");\n      }\n\n      html = \"\";\n      year = parseInt(year / 10, 10) * 10;\n      let yearCont = this.picker.find(\".datepicker-years\").\n        find(\"th:eq(1)\").\n        text(`${year}-${year + 9}`).\n        end().\n        find(\"td\");\n      year -= 1;\n      for (var i = -1; i < 11; i++) {\n        html += `<span class=\"year${i == -1 || i == 10 ? \" old\" : \"\"}${currentYear == year ? \" active\" : \"\"}${year < startYear || year > endYear ? \" disabled\" : \"\"}\">${year}</span>`;\n        year += 1;\n      }\n      yearCont.html(html);\n    },\n\n    updateNavArrows: function() {\n      let d = new Date(this.viewDate),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          day = d.getUTCDate(),\n          hour = d.getUTCHours();\n      switch (this.viewMode) {\n      case 0:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate() && hour <= this.startDate.getUTCHours()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate() && hour >= this.endDate.getUTCHours()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 1:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 2:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 3:\n      case 4:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      }\n    },\n\n    click: function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(e.target).hasClass(\"datepicker-close\") || $(e.target).parent().hasClass(\"datepicker-close\")) {\n        this.hide();\n      }\n\n      let target = $(e.target).closest(\"span, td, th\");\n      if (target.length == 1) {\n        if (target.is(\".disabled\")) {\n          this.element.trigger({\n            type: \"outOfRange\",\n            date: this.viewDate,\n            startDate: this.startDate,\n            endDate: this.endDate\n          });\n          return;\n        }\n\n        switch (target[0].nodeName.toLowerCase()) {\n        case \"th\":\n          switch (target[0].className) {\n          case \"date-switch\":\n            this.showMode(1);\n            break;\n          case \"prev\":\n          case \"next\":\n            var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className == \"prev\" ? -1 : 1);\n            switch (this.viewMode) {\n            case 0:\n              this.viewDate = this.moveHour(this.viewDate, dir);\n              break;\n            case 1:\n              this.viewDate = this.moveDate(this.viewDate, dir);\n              break;\n            case 2:\n              this.viewDate = this.moveMonth(this.viewDate, dir);\n              break;\n            case 3:\n            case 4:\n              this.viewDate = this.moveYear(this.viewDate, dir);\n              break;\n            }\n            this.fill();\n            break;\n          case \"today\":\n            var date = new Date();\n            date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());\n\n            this.viewMode = this.startViewMode;\n            this.showMode(0);\n            this._setDate(date);\n            break;\n          }\n          break;\n        case \"span\":\n          if (!target.is(\".disabled\")) {\n            if (target.is(\".month\")) {\n              if (this.minView === 3) {\n                var month = target.parent().find(\"span\").index(target) || 0;\n                var year = this.viewDate.getUTCFullYear(),\n                    day = 1,\n                    hours = this.viewDate.getUTCHours(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else {\n                this.viewDate.setUTCDate(1);\n                var month = target.parent().find(\"span\").index(target);\n                this.viewDate.setUTCMonth(month);\n                this.element.trigger({\n                  type: \"changeMonth\",\n                  date: this.viewDate\n                });\n              }\n            } else if (target.is(\".year\")) {\n              if (this.minView === 4) {\n                var year = parseInt(target.text(), 10) || 0;\n                var month = 0,\n                    day = 1,\n                    hours = this.viewDate.getUTCHours(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else {\n                this.viewDate.setUTCDate(1);\n                var year = parseInt(target.text(), 10) || 0;\n                this.viewDate.setUTCFullYear(year);\n                this.element.trigger({\n                  type: \"changeYear\",\n                  date: this.viewDate\n                });\n              }\n            } else if (target.is(\".hour\")) {\n              var hours = parseInt(target.text(), 10) || 0;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  day = this.viewDate.getUTCDate(),\n                  minutes = this.viewDate.getUTCMinutes(),\n                  seconds = this.viewDate.getUTCSeconds();\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            } else if (target.is(\".minute\")) {\n              var minutes = parseInt(target.text().substr(target.text().indexOf(\":\") + 1), 10) || 0;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  day = this.viewDate.getUTCDate(),\n                  hours = this.viewDate.getUTCHours(),\n                  seconds = this.viewDate.getUTCSeconds();\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            }\n\n\n            if (this.viewMode != 0) {\n\n\n              var oldViewMode = this.viewMode;\n              this.showMode(-1);\n              this.fill();\n              if (oldViewMode == this.viewMode && this.autoclose) {\n                this.hide();\n              }\n            } else {\n              this.fill();\n              if (this.autoclose) {\n                this.hide();\n              }\n            }\n          }\n          break;\n        case \"td\":\n\n\n          if (target.is(\".day\") && !target.is(\".disabled\")) {\n            var day = parseInt(target.text(), 10) || 1;\n            var year = this.viewDate.getUTCFullYear(),\n                month = this.viewDate.getUTCMonth(),\n                hours = this.viewDate.getUTCHours(),\n                minutes = this.viewDate.getUTCMinutes(),\n                seconds = this.viewDate.getUTCSeconds();\n            if (target.is(\".old\")) {\n              if (month === 0) {\n                month = 11;\n                year -= 1;\n              } else {\n                month -= 1;\n              }\n            } else if (target.is(\".new\")) {\n              if (month == 11) {\n                month = 0;\n                year += 1;\n              } else {\n                month += 1;\n              }\n            }\n            this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n          }\n\n\n          var oldViewMode = this.viewMode;\n\n\n          this.showMode(-1);\n\n\n          this.fill();\n          if (oldViewMode == this.viewMode && this.autoclose) {\n            this.hide();\n          }\n          break;\n        }\n      }\n    },\n\n    _setDate: function(date, which) {\n\n      if (!which || which == \"date\")\n      {this.date = date;}\n      if (!which || which == \"view\")\n      {this.viewDate = date;}\n      this.fill();\n      this.setValue();\n      this.element.trigger({\n        type: \"changeDate\",\n        date: this.date\n      });\n      let element;\n      if (this.isInput) {\n        element = this.element;\n      } else if (this.component) {\n        element = this.element.find(\"input\");\n      }\n      if (element) {\n        element.change();\n        if (this.autoclose && (!which || which == \"date\")) {\n          // this.hide();\n        }\n      }\n    },\n\n    moveHour: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCHours(new_date.getUTCHours() + dir);\n      return new_date;\n    },\n\n    moveDate: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCDate(new_date.getUTCDate() + dir);\n      return new_date;\n    },\n\n    moveMonth: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf()),\n          day = new_date.getUTCDate(),\n          month = new_date.getUTCMonth(),\n          mag = Math.abs(dir),\n          new_month, test;\n      dir = dir > 0 ? 1 : -1;\n      if (mag == 1) {\n        test = dir == -1\n        // If going back one month, make sure month is not current month\n        // (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\n          ? function() {\n            return new_date.getUTCMonth() == month;\n          }\n        // If going forward one month, make sure month is as expected\n        // (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\n          : function() {\n            return new_date.getUTCMonth() != new_month;\n          };\n        new_month = month + dir;\n        new_date.setUTCMonth(new_month);\n        // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\n        if (new_month < 0 || new_month > 11)\n        {new_month = (new_month + 12) % 12;}\n      } else {\n        // For magnitudes >1, move one month at a time...\n        for (let i = 0; i < mag; i++)\n        // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\n        {new_date = this.moveMonth(new_date, dir);}\n        // ...then reset the day, keeping it in the new month\n        new_month = new_date.getUTCMonth();\n        new_date.setUTCDate(day);\n        test = function() {\n          return new_month != new_date.getUTCMonth();\n        };\n      }\n      // Common date-resetting loop -- if date is beyond end of month, make it\n      // end of month\n      while (test()) {\n        new_date.setUTCDate(--day);\n        new_date.setUTCMonth(new_month);\n      }\n      return new_date;\n    },\n\n    moveYear: function(date, dir) {\n      return this.moveMonth(date, dir * 12);\n    },\n\n    dateWithinRange: function(date) {\n      return date >= this.startDate && date <= this.endDate;\n    },\n\n    keydown: function(e) {\n      if (!this.keyboardNavigation) {\n        return true;\n      }\n      if (this.picker.is(\":not(:visible)\")) {\n        if (e.keyCode == 27) // allow escape to hide and re-show picker\n        {this.show();}\n        return;\n      }\n      let dateChanged = false,\n          day, dir, month,\n          newDate, newViewDate;\n      switch (e.keyCode) {\n      case 27: // escape\n        this.hide();\n        e.preventDefault();\n        break;\n      case 37: // left\n      case 39: // right\n        if (!this.keyboardNavigation) {break;}\n        dir = e.keyCode == 37 ? -1 : 1;\n        if (e.ctrlKey) {\n          newDate = this.moveYear(this.date, dir);\n          newViewDate = this.moveYear(this.viewDate, dir);\n        } else if (e.shiftKey) {\n          newDate = this.moveMonth(this.date, dir);\n          newViewDate = this.moveMonth(this.viewDate, dir);\n        } else {\n          newDate = new Date(this.date.valueOf());\n          newDate.setUTCDate(this.date.getUTCDate() + dir);\n          newViewDate = new Date(this.viewDate.valueOf());\n          newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir);\n        }\n        if (this.dateWithinRange(newDate)) {\n          this.date = newDate;\n          this.viewDate = newViewDate;\n          this.setValue();\n          this.update();\n          e.preventDefault();\n          dateChanged = true;\n        }\n        break;\n      case 38: // up\n      case 40: // down\n        if (!this.keyboardNavigation) {break;}\n        dir = e.keyCode == 38 ? -1 : 1;\n        if (e.ctrlKey) {\n          newDate = this.moveYear(this.date, dir);\n          newViewDate = this.moveYear(this.viewDate, dir);\n        } else if (e.shiftKey) {\n          newDate = this.moveMonth(this.date, dir);\n          newViewDate = this.moveMonth(this.viewDate, dir);\n        } else {\n          newDate = new Date(this.date.valueOf());\n          newDate.setUTCDate(this.date.getUTCDate() + dir * 7);\n          newViewDate = new Date(this.viewDate.valueOf());\n          newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir * 7);\n        }\n        if (this.dateWithinRange(newDate)) {\n          this.date = newDate;\n          this.viewDate = newViewDate;\n          this.setValue();\n          this.update();\n          e.preventDefault();\n          dateChanged = true;\n        }\n        break;\n      case 13: // enter\n        this.hide();\n        e.preventDefault();\n        break;\n      case 9: // tab\n        this.hide();\n        break;\n      }\n      if (dateChanged) {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: this.date\n        });\n        let element;\n        if (this.isInput) {\n          element = this.element;\n        } else if (this.component) {\n          element = this.element.find(\"input\");\n        }\n        if (element) {\n          element.change();\n        }\n      }\n    },\n\n    showMode: function(dir) {\n\n      if (dir) {\n        let newViewMode = Math.max(0, Math.min(DPGlobal.modes.length - 1, this.viewMode + dir));\n        if (newViewMode >= this.minView && newViewMode <= this.maxView) {\n          this.viewMode = newViewMode;\n        }\n      }\n\n      /*\n                vitalets: fixing bug of very special conditions:\n                jquery 1.7.1 + webkit + show inline datepicker in bootstrap popover.\n                Method show() does not set display css correctly and datepicker is not shown.\n                Changed to .css('display', 'block') solve the problem.\n                See https://github.com/vitalets/x-editable/issues/37\n\n                In jquery 1.7.2+ everything works fine.\n            */\n      // this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\n      this.picker.find(\">div\").hide().filter(`.datepicker-${DPGlobal.modes[this.viewMode].clsName}`).css(\"display\", \"block\");\n      this.updateNavArrows();\n    },\n\n    changeViewDate: function(date) {\n      this.date = date;\n      this.viewDate = date;\n      this.fill();\n    },\n\n    reset: function(e) {\n      this._setDate(null, \"date\");\n    }\n  };\n\n  $.fn.fdatepicker = function(option) {\n    let args = Array(...arguments);\n    args.shift();\n    return this.each(function() {\n      let $this = $(this),\n          data = $this.data(\"datepicker\"),\n          options = typeof option === \"object\" && option;\n      if (!data) {\n        $this.data(\"datepicker\", (data = new Datepicker(this, $.extend({}, $.fn.fdatepicker.defaults, options))));\n      }\n      if (typeof option === \"string\" && typeof data[option] === \"function\") {\n        data[option](...args);\n      }\n    });\n  };\n\n  $.fn.fdatepicker.defaults = {\n    onRender: function(date) {\n      return \"\";\n    }\n  };\n  $.fn.fdatepicker.Constructor = Datepicker;\n  var dates = $.fn.fdatepicker.dates = {\n    \"en\": {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      today: \"Today\",\n      titleFormat: \"MM yyyy\"\n    }\n  };\n\n  var DPGlobal = {\n    modes: [{\n      clsName: \"minutes\",\n      navFnc: \"Hours\",\n      navStep: 1\n    }, {\n      clsName: \"hours\",\n      navFnc: \"Date\",\n      navStep: 1\n    }, {\n      clsName: \"days\",\n      navFnc: \"Month\",\n      navStep: 1\n    }, {\n      clsName: \"months\",\n      navFnc: \"FullYear\",\n      navStep: 1\n    }, {\n      clsName: \"years\",\n      navFnc: \"FullYear\",\n      navStep: 10\n    }],\n    isLeapYear: function(year) {\n      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));\n    },\n    getDaysInMonth: function(year, month) {\n      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n    validParts: /hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,\n    nonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\n    parseFormat: function(format) {\n      // IE treats \\0 as a string end in inputs (truncating the value),\n      // so it's a bad format delimiter, anyway\n      let separators = format.replace(this.validParts, \"\\0\").split(\"\\0\"),\n          parts = format.match(this.validParts);\n      if (!separators || !separators.length || !parts || parts.length === 0) {\n        throw new Error(\"Invalid date format.\");\n      }\n      this.formatText = format;\n      return {\n        separators: separators,\n        parts: parts\n      };\n    },\n    parseDate: function(date, format, language) {\n      if (date instanceof Date) {return new Date(date.valueOf() - date.getTimezoneOffset() * 60000);}\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd\");\n      }\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii\");\n      }\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}\\:\\d{1,2}[Z]{0,1}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii:ss\");\n      }\n      if (/^[-+]\\d+[dmwy]([\\s,]+[-+]\\d+[dmwy])*$/.test(date)) {\n        var part_re = /([-+]\\d+)([dmwy])/,\n            parts = date.match(/([-+]\\d+)([dmwy])/g),\n            part, dir;\n        date = new Date();\n        for (var i = 0; i < parts.length; i++) {\n          part = part_re.exec(parts[i]);\n          dir = parseInt(part[1]);\n          switch (part[2]) {\n          case \"d\":\n            date.setUTCDate(date.getUTCDate() + dir);\n            break;\n          case \"m\":\n            date = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);\n            break;\n          case \"w\":\n            date.setUTCDate(date.getUTCDate() + dir * 7);\n            break;\n          case \"y\":\n            date = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);\n            break;\n          }\n        }\n        return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\n      }\n      var parts = date && date.match(this.nonpunctuation) || [],\n          date = new Date(),\n          parsed = {},\n          setters_order = [\"hh\", \"h\", \"ii\", \"i\", \"ss\", \"s\", \"yyyy\", \"yy\", \"M\", \"MM\", \"m\", \"mm\", \"d\", \"dd\"],\n          setters_map = {\n            hh: function(d, v) {\n              return d.setUTCHours(v);\n            },\n            h: function(d, v) {\n              return d.setUTCHours(v);\n            },\n            ii: function(d, v) {\n              return d.setUTCMinutes(v);\n            },\n            i: function(d, v) {\n              return d.setUTCMinutes(v);\n            },\n            ss: function(d, v) {\n              return d.setUTCSeconds(v);\n            },\n            s: function(d, v) {\n              return d.setUTCSeconds(v);\n            },\n            yyyy: function(d, v) {\n              return d.setUTCFullYear(v);\n            },\n            yy: function(d, v) {\n              return d.setUTCFullYear(2000 + v);\n            },\n            m: function(d, v) {\n              v -= 1;\n              while (v < 0) {v += 12;}\n              v %= 12;\n              d.setUTCMonth(v);\n              while (d.getUTCMonth() != v)\n              {d.setUTCDate(d.getUTCDate() - 1);}\n              return d;\n            },\n            d: function(d, v) {\n              return d.setUTCDate(v);\n            }\n          },\n          val, filtered, part;\n      setters_map.M = setters_map.MM = setters_map.mm = setters_map.m;\n      setters_map.dd = setters_map.d;\n      date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0); // date.getHours(), date.getMinutes(), date.getSeconds());\n      if (parts.length == format.parts.length) {\n        for (var i = 0, cnt = format.parts.length; i < cnt; i++) {\n          val = parseInt(parts[i], 10);\n          part = format.parts[i];\n          if (isNaN(val)) {\n            switch (part) {\n            case \"MM\":\n              filtered = $(dates[language].months).filter(function() {\n                let m = this.slice(0, parts[i].length),\n                    p = parts[i].slice(0, m.length);\n                return m == p;\n              });\n              val = $.inArray(filtered[0], dates[language].months) + 1;\n              break;\n            case \"M\":\n              filtered = $(dates[language].monthsShort).filter(function() {\n                let m = this.slice(0, parts[i].length),\n                    p = parts[i].slice(0, m.length);\n                return m == p;\n              });\n              val = $.inArray(filtered[0], dates[language].monthsShort) + 1;\n              break;\n            }\n          }\n          parsed[part] = val;\n        }\n        for (var i = 0, s; i < setters_order.length; i++) {\n          s = setters_order[i];\n          if (s in parsed && !isNaN(parsed[s]))\n          {setters_map[s](date, parsed[s])}\n        }\n      }\n      return date;\n    },\n    formatDate: function(date, format, language) {\n      if (date == null) {\n        return \"\";\n      }\n      let val = {\n        h: date.getUTCHours(),\n        i: date.getUTCMinutes(),\n        s: date.getUTCSeconds(),\n        d: date.getUTCDate(),\n        m: date.getUTCMonth() + 1,\n        M: dates[language].monthsShort[date.getUTCMonth()],\n        MM: dates[language].months[date.getUTCMonth()],\n        yy: date.getUTCFullYear().toString().substring(2),\n        yyyy: date.getUTCFullYear()\n      };\n      val.hh = (val.h < 10 ? \"0\" : \"\") + val.h;\n      val.ii = (val.i < 10 ? \"0\" : \"\") + val.i;\n      val.ss = (val.s < 10 ? \"0\" : \"\") + val.s;\n      val.dd = (val.d < 10 ? \"0\" : \"\") + val.d;\n      val.mm = (val.m < 10 ? \"0\" : \"\") + val.m;\n      var date = [],\n          seps = $.extend([], format.separators);\n      for (let i = 0, cnt = format.parts.length; i < cnt; i++) {\n        if (seps.length)\n        {date.push(seps.shift())}\n        date.push(val[format.parts[i]]);\n      }\n      return date.join(\"\");\n    },\n    convertViewMode: function(viewMode) {\n      switch (viewMode) {\n      case 4:\n      case \"decade\":\n        viewMode = 4;\n        break;\n      case 3:\n      case \"year\":\n        viewMode = 3;\n        break;\n      case 2:\n      case \"month\":\n        viewMode = 2;\n        break;\n      case 1:\n      case \"day\":\n        viewMode = 1;\n        break;\n      case 0:\n      case \"hour\":\n        viewMode = 0;\n        break;\n      }\n\n      return viewMode;\n    },\n    headTemplate: function(leftArrow, rightArrow) {return (`${\"<thead>\" +\n            \"<tr>\" +\n            '<th class=\"prev\">'}${leftArrow}</th>` +\n            \"<th colspan=\\\"5\\\" class=\\\"date-switch\\\"></th>\" +\n            `<th class=\"next\">${rightArrow}</th>` +\n            \"</tr>\" +\n            \"</thead>\")},\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\n    footTemplate: '<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr></tfoot>'\n  };\n  DPGlobal.template = function(leftArrow, rightArrow, closeIcon) {return (`${'<div class=\"datepicker\">' +\n        '<div class=\"datepicker-minutes\">' +\n        '<table class=\" table-condensed\">'}${\n    DPGlobal.headTemplate(leftArrow, rightArrow)\n  }${DPGlobal.contTemplate\n  }${DPGlobal.footTemplate\n  }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-hours\\\">\" +\n        `<table class=\" table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-days\\\">\" +\n        `<table class=\" table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }<tbody></tbody>${\n          DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-months\\\">\" +\n        `<table class=\"table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-years\\\">\" +\n        `<table class=\"table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        `<a class=\"button datepicker-close tiny alert right\" style=\"width:auto;\">${closeIcon}</a>` +\n        \"</div>\")};\n\n  $.fn.fdatepicker.DPGlobal = DPGlobal;\n\n}(window.jQuery));\n","/* eslint-disable */\n\n/*\n  Modified file from the original tribute.js\n  Adding inside click event the conditional if the li element has no disabled-tribute-element class name. if true, then it must continue with normal behaviour.\n*/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Tribute = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nrequire(\"./utils\");\n\nvar _TributeEvents = _interopRequireDefault(require(\"./TributeEvents\"));\n\nvar _TributeMenuEvents = _interopRequireDefault(require(\"./TributeMenuEvents\"));\n\nvar _TributeRange = _interopRequireDefault(require(\"./TributeRange\"));\n\nvar _TributeSearch = _interopRequireDefault(require(\"./TributeSearch\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Tribute =\n/*#__PURE__*/\nfunction () {\n  function Tribute(_ref) {\n    var _this = this;\n\n    var _ref$values = _ref.values,\n        values = _ref$values === void 0 ? null : _ref$values,\n        _ref$iframe = _ref.iframe,\n        iframe = _ref$iframe === void 0 ? null : _ref$iframe,\n        _ref$selectClass = _ref.selectClass,\n        selectClass = _ref$selectClass === void 0 ? 'highlight' : _ref$selectClass,\n        _ref$trigger = _ref.trigger,\n        trigger = _ref$trigger === void 0 ? '@' : _ref$trigger,\n        _ref$autocompleteMode = _ref.autocompleteMode,\n        autocompleteMode = _ref$autocompleteMode === void 0 ? false : _ref$autocompleteMode,\n        _ref$selectTemplate = _ref.selectTemplate,\n        selectTemplate = _ref$selectTemplate === void 0 ? null : _ref$selectTemplate,\n        _ref$menuItemTemplate = _ref.menuItemTemplate,\n        menuItemTemplate = _ref$menuItemTemplate === void 0 ? null : _ref$menuItemTemplate,\n        _ref$lookup = _ref.lookup,\n        lookup = _ref$lookup === void 0 ? 'key' : _ref$lookup,\n        _ref$fillAttr = _ref.fillAttr,\n        fillAttr = _ref$fillAttr === void 0 ? 'value' : _ref$fillAttr,\n        _ref$collection = _ref.collection,\n        collection = _ref$collection === void 0 ? null : _ref$collection,\n        _ref$menuContainer = _ref.menuContainer,\n        menuContainer = _ref$menuContainer === void 0 ? null : _ref$menuContainer,\n        _ref$noMatchTemplate = _ref.noMatchTemplate,\n        noMatchTemplate = _ref$noMatchTemplate === void 0 ? null : _ref$noMatchTemplate,\n        _ref$requireLeadingSp = _ref.requireLeadingSpace,\n        requireLeadingSpace = _ref$requireLeadingSp === void 0 ? true : _ref$requireLeadingSp,\n        _ref$allowSpaces = _ref.allowSpaces,\n        allowSpaces = _ref$allowSpaces === void 0 ? false : _ref$allowSpaces,\n        _ref$replaceTextSuffi = _ref.replaceTextSuffix,\n        replaceTextSuffix = _ref$replaceTextSuffi === void 0 ? null : _ref$replaceTextSuffi,\n        _ref$positionMenu = _ref.positionMenu,\n        positionMenu = _ref$positionMenu === void 0 ? true : _ref$positionMenu,\n        _ref$spaceSelectsMatc = _ref.spaceSelectsMatch,\n        spaceSelectsMatch = _ref$spaceSelectsMatc === void 0 ? false : _ref$spaceSelectsMatc,\n        _ref$searchOpts = _ref.searchOpts,\n        searchOpts = _ref$searchOpts === void 0 ? {} : _ref$searchOpts,\n        _ref$menuItemLimit = _ref.menuItemLimit,\n        menuItemLimit = _ref$menuItemLimit === void 0 ? null : _ref$menuItemLimit;\n\n    _classCallCheck(this, Tribute);\n\n    this.autocompleteMode = autocompleteMode;\n    this.menuSelected = 0;\n    this.current = {};\n    this.inputEvent = false;\n    this.isActive = false;\n    this.menuContainer = menuContainer;\n    this.allowSpaces = allowSpaces;\n    this.replaceTextSuffix = replaceTextSuffix;\n    this.positionMenu = positionMenu;\n    this.hasTrailingSpace = false;\n    this.spaceSelectsMatch = spaceSelectsMatch;\n\n    if (this.autocompleteMode) {\n      trigger = '';\n      allowSpaces = false;\n    }\n\n    if (values) {\n      this.collection = [{\n        // symbol that starts the lookup\n        trigger: trigger,\n        // is it wrapped in an iframe\n        iframe: iframe,\n        // class applied to selected item\n        selectClass: selectClass,\n        // function called on select that retuns the content to insert\n        selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\n        // function called that returns content for an item\n        menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\n        // function called when menu is empty, disables hiding of menu.\n        noMatchTemplate: function (t) {\n          if (typeof t === 'function') {\n            return t.bind(_this);\n          }\n\n          return noMatchTemplate || function () {\n            return '';\n          }.bind(_this);\n        }(noMatchTemplate),\n        // column to search against in the object\n        lookup: lookup,\n        // column that contains the content to insert by default\n        fillAttr: fillAttr,\n        // array of objects or a function returning an array of objects\n        values: values,\n        requireLeadingSpace: requireLeadingSpace,\n        searchOpts: searchOpts,\n        menuItemLimit: menuItemLimit\n      }];\n    } else if (collection) {\n      if (this.autocompleteMode) console.warn('Tribute in autocomplete mode does not work for collections');\n      this.collection = collection.map(function (item) {\n        return {\n          trigger: item.trigger || trigger,\n          iframe: item.iframe || iframe,\n          selectClass: item.selectClass || selectClass,\n          selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(_this),\n          menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(_this),\n          // function called when menu is empty, disables hiding of menu.\n          noMatchTemplate: function (t) {\n            if (typeof t === 'function') {\n              return t.bind(_this);\n            }\n\n            return null;\n          }(noMatchTemplate),\n          lookup: item.lookup || lookup,\n          fillAttr: item.fillAttr || fillAttr,\n          values: item.values,\n          requireLeadingSpace: item.requireLeadingSpace,\n          searchOpts: item.searchOpts || searchOpts,\n          menuItemLimit: item.menuItemLimit || menuItemLimit\n        };\n      });\n    } else {\n      throw new Error('[Tribute] No collection specified.');\n    }\n\n    new _TributeRange[\"default\"](this);\n    new _TributeEvents[\"default\"](this);\n    new _TributeMenuEvents[\"default\"](this);\n    new _TributeSearch[\"default\"](this);\n  }\n\n  _createClass(Tribute, [{\n    key: \"triggers\",\n    value: function triggers() {\n      return this.collection.map(function (config) {\n        return config.trigger;\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(el) {\n      if (!el) {\n        throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n      } // Check if it is a jQuery collection\n\n\n      if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n        el = el.get();\n      } // Is el an Array/Array-like object?\n\n\n      if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n        var length = el.length;\n\n        for (var i = 0; i < length; ++i) {\n          this._attach(el[i]);\n        }\n      } else {\n        this._attach(el);\n      }\n    }\n  }, {\n    key: \"_attach\",\n    value: function _attach(el) {\n      if (el.hasAttribute('data-tribute')) {\n        console.warn('Tribute was already bound to ' + el.nodeName);\n      }\n\n      this.ensureEditable(el);\n      this.events.bind(el);\n      el.setAttribute('data-tribute', true);\n    }\n  }, {\n    key: \"ensureEditable\",\n    value: function ensureEditable(element) {\n      if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n        if (element.contentEditable) {\n          element.contentEditable = true;\n        } else {\n          throw new Error('[Tribute] Cannot bind to ' + element.nodeName);\n        }\n      }\n    }\n  }, {\n    key: \"createMenu\",\n    value: function createMenu() {\n      var wrapper = this.range.getDocument().createElement('div'),\n          ul = this.range.getDocument().createElement('ul');\n      wrapper.className = 'tribute-container';\n      wrapper.setAttribute('aria-expanded','true');\n      ul.setAttribute('id','results');\n      wrapper.appendChild(ul);\n\n      if (this.menuContainer) {\n        return this.menuContainer.appendChild(wrapper);\n      }\n\n      return this.range.getDocument().body.appendChild(wrapper);\n    }\n  }, {\n    key: \"showMenuFor\",\n    value: function showMenuFor(element, scrollTo) {\n      var _this2 = this;\n\n      // Only proceed if menu isn't already shown for the current element & mentionText\n      if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\n        return;\n      }\n\n      this.currentMentionTextSnapshot = this.current.mentionText; // create the menu if it doesn't exist.\n\n      if (!this.menu) {\n        this.menu = this.createMenu();\n        element.tributeMenu = this.menu;\n        this.menuEvents.bind(this.menu);\n      }\n\n      this.isActive = true;\n      this.menuSelected = 0;\n\n      if (!this.current.mentionText) {\n        this.current.mentionText = '';\n      }\n\n      var processValues = function processValues(values) {\n        // Tribute may not be active any more by the time the value callback returns\n        if (!_this2.isActive) {\n          return;\n        }\n\n        var items = _this2.search.filter(_this2.current.mentionText, values, {\n          pre: _this2.current.collection.searchOpts.pre || '<span>',\n          post: _this2.current.collection.searchOpts.post || '</span>',\n          skip: _this2.current.collection.searchOpts.skip,\n          extract: function extract(el) {\n            if (typeof _this2.current.collection.lookup === 'string') {\n              return el[_this2.current.collection.lookup];\n            } else if (typeof _this2.current.collection.lookup === 'function') {\n              return _this2.current.collection.lookup(el, _this2.current.mentionText);\n            } else {\n              throw new Error('Invalid lookup attribute, lookup must be string or function.');\n            }\n          }\n        });\n\n        if (_this2.current.collection.menuItemLimit) {\n          items = items.slice(0, _this2.current.collection.menuItemLimit);\n        }\n\n        _this2.current.filteredItems = items;\n\n        var ul = _this2.menu.querySelector('ul');\n\n        _this2.range.positionMenuAtCaret(scrollTo);\n\n        if (!items.length) {\n          var noMatchEvent = new CustomEvent('tribute-no-match', {\n            detail: _this2.menu\n          });\n\n          _this2.current.element.dispatchEvent(noMatchEvent);\n\n          if (typeof _this2.current.collection.noMatchTemplate === 'function' && !_this2.current.collection.noMatchTemplate() || !_this2.current.collection.noMatchTemplate) {\n            _this2.hideMenu();\n          } else {\n            typeof _this2.current.collection.noMatchTemplate === 'function' ? ul.innerHTML = _this2.current.collection.noMatchTemplate() : ul.innerHTML = _this2.current.collection.noMatchTemplate;\n          }\n\n          return;\n        }\n\n        ul.innerHTML = '';\n\n        var fragment = _this2.range.getDocument().createDocumentFragment();\n\n        items.forEach(function (item, index) {\n          var li = _this2.range.getDocument().createElement('li');\n          li.setAttribute('role', 'option');\n          li.setAttribute('data-index', index);\n          li.addEventListener('mousemove', function (e) {\n            var _this2$_findLiTarget = _this2._findLiTarget(e.target),\n                _this2$_findLiTarget2 = _slicedToArray(_this2$_findLiTarget, 2),\n                li = _this2$_findLiTarget2[0],\n                index = _this2$_findLiTarget2[1];\n\n            if (e.movementY !== 0) {\n              _this2.events.setActiveLi(index);\n            }\n          });\n\n          if (_this2.menuSelected === index) {\n            li.className = _this2.current.collection.selectClass;\n          }\n\n          li.innerHTML = _this2.current.collection.menuItemTemplate(item);\n          fragment.appendChild(li);\n        });\n        ul.appendChild(fragment);\n      };\n\n      if (typeof this.current.collection.values === 'function') {\n        this.current.collection.values(this.current.mentionText, processValues);\n      } else {\n        processValues(this.current.collection.values);\n      }\n    }\n  }, {\n    key: \"_findLiTarget\",\n    value: function _findLiTarget(el) {\n      if (!el) return [];\n      var index = el.getAttribute('data-index');\n      return !index ? this._findLiTarget(el.parentNode) : [el, index];\n    }\n  }, {\n    key: \"showMenuForCollection\",\n    value: function showMenuForCollection(element, collectionIndex) {\n      if (element !== document.activeElement) {\n        this.placeCaretAtEnd(element);\n      }\n\n      this.current.collection = this.collection[collectionIndex || 0];\n      this.current.externalTrigger = true;\n      this.current.element = element;\n      if (element.isContentEditable) this.insertTextAtCursor(this.current.collection.trigger);else this.insertAtCaret(element, this.current.collection.trigger);\n      this.showMenuFor(element);\n    } // TODO: make sure this works for inputs/textareas\n\n  }, {\n    key: \"placeCaretAtEnd\",\n    value: function placeCaretAtEnd(el) {\n      el.focus();\n\n      if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n        var range = document.createRange();\n        range.selectNodeContents(el);\n        range.collapse(false);\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.body.createTextRange != \"undefined\") {\n        var textRange = document.body.createTextRange();\n        textRange.moveToElementText(el);\n        textRange.collapse(false);\n        textRange.select();\n      }\n    } // for contenteditable\n\n  }, {\n    key: \"insertTextAtCursor\",\n    value: function insertTextAtCursor(text) {\n      var sel, range, html;\n      sel = window.getSelection();\n      range = sel.getRangeAt(0);\n      range.deleteContents();\n      var textNode = document.createTextNode(text);\n      range.insertNode(textNode);\n      range.selectNodeContents(textNode);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } // for regular inputs\n\n  }, {\n    key: \"insertAtCaret\",\n    value: function insertAtCaret(textarea, text) {\n      var scrollPos = textarea.scrollTop;\n      var caretPos = textarea.selectionStart;\n      var front = textarea.value.substring(0, caretPos);\n      var back = textarea.value.substring(textarea.selectionEnd, textarea.value.length);\n      textarea.value = front + text + back;\n      caretPos = caretPos + text.length;\n      textarea.selectionStart = caretPos;\n      textarea.selectionEnd = caretPos;\n      textarea.focus();\n      textarea.scrollTop = scrollPos;\n    }\n  }, {\n    key: \"hideMenu\",\n    value: function hideMenu() {\n      if (this.menu) {\n        this.menu.style.cssText = 'display: none;';\n        this.isActive = false;\n        this.menuSelected = 0;\n        this.current = {};\n      }\n    }\n  }, {\n    key: \"selectItemAtIndex\",\n    value: function selectItemAtIndex(index, originalEvent) {\n      index = parseInt(index);\n      if (typeof index !== 'number' || isNaN(index)) return;\n      var item = this.current.filteredItems[index];\n      var content = this.current.collection.selectTemplate(item);\n      if (content !== null) this.replaceText(content, originalEvent, item);\n    }\n  }, {\n    key: \"replaceText\",\n    value: function replaceText(content, originalEvent, item) {\n      this.range.replaceTriggerText(content, true, true, originalEvent, item);\n    }\n  }, {\n    key: \"_append\",\n    value: function _append(collection, newValues, replace) {\n      if (typeof collection.values === 'function') {\n        throw new Error('Unable to append to values, as it is a function.');\n      } else if (!replace) {\n        collection.values = collection.values.concat(newValues);\n      } else {\n        collection.values = newValues;\n      }\n    }\n  }, {\n    key: \"append\",\n    value: function append(collectionIndex, newValues, replace) {\n      var index = parseInt(collectionIndex);\n      if (typeof index !== 'number') throw new Error('please provide an index for the collection to update.');\n      var collection = this.collection[index];\n\n      this._append(collection, newValues, replace);\n    }\n  }, {\n    key: \"appendCurrent\",\n    value: function appendCurrent(newValues, replace) {\n      if (this.isActive) {\n        this._append(this.current.collection, newValues, replace);\n      } else {\n        throw new Error('No active state. Please use append instead and pass an index.');\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach(el) {\n      if (!el) {\n        throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n      } // Check if it is a jQuery collection\n\n\n      if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n        el = el.get();\n      } // Is el an Array/Array-like object?\n\n\n      if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n        var length = el.length;\n\n        for (var i = 0; i < length; ++i) {\n          this._detach(el[i]);\n        }\n      } else {\n        this._detach(el);\n      }\n    }\n  }, {\n    key: \"_detach\",\n    value: function _detach(el) {\n      var _this3 = this;\n\n      this.events.unbind(el);\n\n      if (el.tributeMenu) {\n        this.menuEvents.unbind(el.tributeMenu);\n      }\n\n      setTimeout(function () {\n        el.removeAttribute('data-tribute');\n        _this3.isActive = false;\n\n        if (el.tributeMenu) {\n          el.tributeMenu.remove();\n        }\n      });\n    }\n  }], [{\n    key: \"defaultSelectTemplate\",\n    value: function defaultSelectTemplate(item) {\n      if (typeof item === 'undefined') return null;\n\n      if (this.range.isContentEditable(this.current.element)) {\n        return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + '</span>';\n      }\n\n      return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\n    }\n  }, {\n    key: \"defaultMenuItemTemplate\",\n    value: function defaultMenuItemTemplate(matchItem) {\n      return matchItem.string;\n    }\n  }, {\n    key: \"inputTypes\",\n    value: function inputTypes() {\n      return ['TEXTAREA', 'INPUT'];\n    }\n  }]);\n\n  return Tribute;\n}();\n\nvar _default = Tribute;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{\"./TributeEvents\":2,\"./TributeMenuEvents\":3,\"./TributeRange\":4,\"./TributeSearch\":5,\"./utils\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TributeEvents =\n/*#__PURE__*/\nfunction () {\n  function TributeEvents(tribute) {\n    _classCallCheck(this, TributeEvents);\n\n    this.tribute = tribute;\n    this.tribute.events = this;\n  }\n\n  _createClass(TributeEvents, [{\n    key: \"bind\",\n    value: function bind(element) {\n      element.boundKeydown = this.keydown.bind(element, this);\n      element.boundKeyup = this.keyup.bind(element, this);\n      element.boundInput = this.input.bind(element, this);\n      element.addEventListener('keydown', element.boundKeydown, false);\n      element.addEventListener('keyup', element.boundKeyup, false);\n      element.addEventListener('input', element.boundInput, false);\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(element) {\n      element.removeEventListener('keydown', element.boundKeydown, false);\n      element.removeEventListener('keyup', element.boundKeyup, false);\n      element.removeEventListener('input', element.boundInput, false);\n      delete element.boundKeydown;\n      delete element.boundKeyup;\n      delete element.boundInput;\n    }\n  }, {\n    key: \"keydown\",\n    value: function keydown(instance, event) {\n      if (instance.shouldDeactivate(event)) {\n        instance.tribute.isActive = false;\n        instance.tribute.hideMenu();\n      }\n\n      var element = this;\n      instance.commandEvent = false;\n      TributeEvents.keys().forEach(function (o) {\n        if (o.key === event.keyCode) {\n          instance.commandEvent = true;\n          instance.callbacks()[o.value.toLowerCase()](event, element);\n        }\n      });\n    }\n  }, {\n    key: \"input\",\n    value: function input(instance, event) {\n      instance.inputEvent = true;\n      instance.keyup.call(this, instance, event);\n    }\n  }, {\n    key: \"click\",\n    value: function click(instance, event) {\n      var tribute = instance.tribute;\n\n      if (tribute.menu && tribute.menu.contains(event.target)) {\n        var li = event.target;\n        event.preventDefault();\n        event.stopPropagation();\n\n        while (li.nodeName.toLowerCase() !== 'li') {\n          li = li.parentNode;\n\n          if (!li || li === tribute.menu) {\n            throw new Error('cannot find the <li> container for the click');\n          }\n        }\n\n        if (li.getElementsByClassName(\"disabled-tribute-element\")[0]==undefined){\n          tribute.selectItemAtIndex(li.getAttribute('data-index'), event);\n          tribute.hideMenu(); // TODO: should fire with externalTrigger and target is outside of menu\n        }\n      } else if (tribute.current.element && !tribute.current.externalTrigger) {\n        tribute.current.externalTrigger = false;\n        setTimeout(function () {\n          return tribute.hideMenu();\n        });\n      }\n    }\n  }, {\n    key: \"keyup\",\n    value: function keyup(instance, event) {\n      if (instance.inputEvent) {\n        instance.inputEvent = false;\n      }\n\n      instance.updateSelection(this);\n      if (event.keyCode === 27) return;\n\n      if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n        instance.tribute.hasTrailingSpace = false;\n        instance.commandEvent = true;\n        instance.callbacks()[\"space\"](event, this);\n        return;\n      }\n\n      if (!instance.tribute.isActive) {\n        if (instance.tribute.autocompleteMode) {\n          instance.callbacks().triggerChar(event, this, '');\n        } else {\n          var keyCode = instance.getKeyCode(instance, this, event);\n          if (isNaN(keyCode) || !keyCode) return;\n          var trigger = instance.tribute.triggers().find(function (trigger) {\n            return trigger.charCodeAt(0) === keyCode;\n          });\n\n          if (typeof trigger !== 'undefined') {\n            instance.callbacks().triggerChar(event, this, trigger);\n          }\n        }\n      }\n\n      if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode) && instance.commandEvent === false || instance.tribute.isActive && event.keyCode === 8) {\n        instance.tribute.showMenuFor(this, true);\n      }\n    }\n  }, {\n    key: \"shouldDeactivate\",\n    value: function shouldDeactivate(event) {\n      if (!this.tribute.isActive) return false;\n\n      if (this.tribute.current.mentionText.length === 0) {\n        var eventKeyPressed = false;\n        TributeEvents.keys().forEach(function (o) {\n          if (event.keyCode === o.key) eventKeyPressed = true;\n        });\n        return !eventKeyPressed;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getKeyCode\",\n    value: function getKeyCode(instance, el, event) {\n      var _char;\n\n      var tribute = instance.tribute;\n      var info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode);\n\n      if (info) {\n        return info.mentionTriggerChar.charCodeAt(0);\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"updateSelection\",\n    value: function updateSelection(el) {\n      this.tribute.current.element = el;\n      var info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (info) {\n        this.tribute.current.selectedPath = info.mentionSelectedPath;\n        this.tribute.current.mentionText = info.mentionText;\n        this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n      }\n    }\n  }, {\n    key: \"callbacks\",\n    value: function callbacks() {\n      var _this = this;\n\n      return {\n        triggerChar: function triggerChar(e, el, trigger) {\n          var tribute = _this.tribute;\n          tribute.current.trigger = trigger;\n          var collectionItem = tribute.collection.find(function (item) {\n            return item.trigger === trigger;\n          });\n          tribute.current.collection = collectionItem;\n          if (tribute.inputEvent) tribute.showMenuFor(el, true);\n        },\n        enter: function enter(e, el) {\n          // choose selection\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            setTimeout(function () {\n              _this.tribute.selectItemAtIndex(_this.tribute.menuSelected, e);\n\n              _this.tribute.hideMenu();\n            }, 0);\n          }\n        },\n        escape: function escape(e, el) {\n          if (_this.tribute.isActive) {\n            e.preventDefault();\n            e.stopPropagation();\n            _this.tribute.isActive = false;\n\n            _this.tribute.hideMenu();\n          }\n        },\n        tab: function tab(e, el) {\n          // choose first match\n          _this.callbacks().enter(e, el);\n        },\n        space: function space(e, el) {\n          if (_this.tribute.isActive) {\n            if (_this.tribute.spaceSelectsMatch) {\n              _this.callbacks().enter(e, el);\n            } else if (!_this.tribute.allowSpaces) {\n              e.stopPropagation();\n              setTimeout(function () {\n                _this.tribute.hideMenu();\n\n                _this.tribute.isActive = false;\n              }, 0);\n            }\n          }\n        },\n        up: function up(e, el) {\n          // navigate up ul\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            var count = _this.tribute.current.filteredItems.length,\n                selected = _this.tribute.menuSelected;\n\n            if (count > selected && selected > 0) {\n              _this.tribute.menuSelected--;\n\n              _this.setActiveLi();\n            } else if (selected === 0) {\n              _this.tribute.menuSelected = count - 1;\n\n              _this.setActiveLi();\n\n              _this.tribute.menu.scrollTop = _this.tribute.menu.scrollHeight;\n            }\n          }\n        },\n        down: function down(e, el) {\n          // navigate down ul\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            var count = _this.tribute.current.filteredItems.length - 1,\n                selected = _this.tribute.menuSelected;\n\n            if (count > selected) {\n              _this.tribute.menuSelected++;\n\n              _this.setActiveLi();\n            } else if (count === selected) {\n              _this.tribute.menuSelected = 0;\n\n              _this.setActiveLi();\n\n              _this.tribute.menu.scrollTop = 0;\n            }\n          }\n        },\n        \"delete\": function _delete(e, el) {\n          if (_this.tribute.isActive && _this.tribute.current.mentionText.length < 1) {\n            _this.tribute.hideMenu();\n          } else if (_this.tribute.isActive) {\n            _this.tribute.showMenuFor(el);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"setActiveLi\",\n    value: function setActiveLi(index) {\n      var lis = this.tribute.menu.querySelectorAll('li'),\n          length = lis.length >>> 0;\n      if (index) this.tribute.menuSelected = parseInt(index);\n\n      for (var i = 0; i < length; i++) {\n        var li = lis[i];\n\n        if (i === this.tribute.menuSelected) {\n          li.classList.add(this.tribute.current.collection.selectClass);\n          var liClientRect = li.getBoundingClientRect();\n          var menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n          if (liClientRect.bottom > menuClientRect.bottom) {\n            var scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n            this.tribute.menu.scrollTop += scrollDistance;\n          } else if (liClientRect.top < menuClientRect.top) {\n            var _scrollDistance = menuClientRect.top - liClientRect.top;\n\n            this.tribute.menu.scrollTop -= _scrollDistance;\n          }\n        } else {\n          li.classList.remove(this.tribute.current.collection.selectClass);\n        }\n      }\n    }\n  }, {\n    key: \"getFullHeight\",\n    value: function getFullHeight(elem, includeMargin) {\n      var height = elem.getBoundingClientRect().height;\n\n      if (includeMargin) {\n        var style = elem.currentStyle || window.getComputedStyle(elem);\n        return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n      }\n\n      return height;\n    }\n  }], [{\n    key: \"keys\",\n    value: function keys() {\n      return [{\n        key: 9,\n        value: 'TAB'\n      }, {\n        key: 8,\n        value: 'DELETE'\n      }, {\n        key: 13,\n        value: 'ENTER'\n      }, {\n        key: 27,\n        value: 'ESCAPE'\n      }, {\n        key: 32,\n        value: 'SPACE'\n      }, {\n        key: 38,\n        value: 'UP'\n      }, {\n        key: 40,\n        value: 'DOWN'\n      }];\n    }\n  }]);\n\n  return TributeEvents;\n}();\n\nvar _default = TributeEvents;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TributeMenuEvents =\n/*#__PURE__*/\nfunction () {\n  function TributeMenuEvents(tribute) {\n    _classCallCheck(this, TributeMenuEvents);\n\n    this.tribute = tribute;\n    this.tribute.menuEvents = this;\n    this.menu = this.tribute.menu;\n  }\n\n  _createClass(TributeMenuEvents, [{\n    key: \"bind\",\n    value: function bind(menu) {\n      var _this = this;\n\n      this.menuClickEvent = this.tribute.events.click.bind(null, this);\n      this.menuContainerScrollEvent = this.debounce(function () {\n        if (_this.tribute.isActive) {\n          _this.tribute.showMenuFor(_this.tribute.current.element, false);\n        }\n      }, 300, false);\n      this.windowResizeEvent = this.debounce(function () {\n        if (_this.tribute.isActive) {\n          _this.tribute.range.positionMenuAtCaret(true);\n        }\n      }, 300, false); // fixes IE11 issues with mousedown\n\n      this.tribute.range.getDocument().addEventListener('MSPointerDown', this.menuClickEvent, false);\n      this.tribute.range.getDocument().addEventListener('mousedown', this.menuClickEvent, false);\n      window.addEventListener('resize', this.windowResizeEvent);\n\n      if (this.menuContainer) {\n        this.menuContainer.addEventListener('scroll', this.menuContainerScrollEvent, false);\n      } else {\n        window.addEventListener('scroll', this.menuContainerScrollEvent);\n      }\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(menu) {\n      this.tribute.range.getDocument().removeEventListener('mousedown', this.menuClickEvent, false);\n      this.tribute.range.getDocument().removeEventListener('MSPointerDown', this.menuClickEvent, false);\n      window.removeEventListener('resize', this.windowResizeEvent);\n\n      if (this.menuContainer) {\n        this.menuContainer.removeEventListener('scroll', this.menuContainerScrollEvent, false);\n      } else {\n        window.removeEventListener('scroll', this.menuContainerScrollEvent);\n      }\n    }\n  }, {\n    key: \"debounce\",\n    value: function debounce(func, wait, immediate) {\n      var _this2 = this,\n          _arguments = arguments;\n\n      var timeout;\n      return function () {\n        var context = _this2,\n            args = _arguments;\n\n        var later = function later() {\n          timeout = null;\n          if (!immediate) func.apply(context, args);\n        };\n\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n      };\n    }\n  }]);\n\n  return TributeMenuEvents;\n}();\n\nvar _default = TributeMenuEvents;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Thanks to https://github.com/jeff-collins/ment.io\nvar TributeRange =\n/*#__PURE__*/\nfunction () {\n  function TributeRange(tribute) {\n    _classCallCheck(this, TributeRange);\n\n    this.tribute = tribute;\n    this.tribute.range = this;\n  }\n\n  _createClass(TributeRange, [{\n    key: \"getDocument\",\n    value: function getDocument() {\n      var iframe;\n\n      if (this.tribute.current.collection) {\n        iframe = this.tribute.current.collection.iframe;\n      }\n\n      if (!iframe) {\n        return document;\n      }\n\n      return iframe.contentWindow.document;\n    }\n  }, {\n    key: \"positionMenuAtCaret\",\n    value: function positionMenuAtCaret(scrollTo) {\n      var _this = this;\n\n      var context = this.tribute.current,\n          coordinates;\n      var info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (typeof info !== 'undefined') {\n        if (!this.tribute.positionMenu) {\n          this.tribute.menu.style.cssText = \"display: block;\";\n          return;\n        }\n\n        if (!this.isContentEditable(context.element)) {\n          coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element, info.mentionPosition);\n        } else {\n          coordinates = this.getContentEditableCaretPosition(info.mentionPosition);\n        }\n\n        this.tribute.menu.style.cssText = \"top: \".concat(coordinates.top, \"px;\\n                                     left: \").concat(coordinates.left, \"px;\\n                                     right: \").concat(coordinates.right, \"px;\\n                                     bottom: \").concat(coordinates.bottom, \"px;\\n                                     position: absolute;\\n                                     display: block;\");\n\n        if (coordinates.left === 'auto') {\n          this.tribute.menu.style.left = 'auto';\n        }\n\n        if (coordinates.top === 'auto') {\n          this.tribute.menu.style.top = 'auto';\n        }\n\n        if (scrollTo) this.scrollIntoView();\n        window.setTimeout(function () {\n          var menuDimensions = {\n            width: _this.tribute.menu.offsetWidth,\n            height: _this.tribute.menu.offsetHeight\n          };\n\n          var menuIsOffScreen = _this.isMenuOffScreen(coordinates, menuDimensions);\n\n          var menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right);\n          var menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom);\n\n          if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n            _this.tribute.menu.style.cssText = 'display: none';\n\n            _this.positionMenuAtCaret(scrollTo);\n          }\n        }, 0);\n      } else {\n        this.tribute.menu.style.cssText = 'display: none';\n      }\n    }\n  }, {\n    key: \"selectElement\",\n    value: function selectElement(targetElement, path, offset) {\n      var range;\n      var elem = targetElement;\n\n      if (path) {\n        for (var i = 0; i < path.length; i++) {\n          elem = elem.childNodes[path[i]];\n\n          if (elem === undefined) {\n            return;\n          }\n\n          while (elem.length < offset) {\n            offset -= elem.length;\n            elem = elem.nextSibling;\n          }\n\n          if (elem.childNodes.length === 0 && !elem.length) {\n            elem = elem.previousSibling;\n          }\n        }\n      }\n\n      var sel = this.getWindowSelection();\n      range = this.getDocument().createRange();\n      range.setStart(elem, offset);\n      range.setEnd(elem, offset);\n      range.collapse(true);\n\n      try {\n        sel.removeAllRanges();\n      } catch (error) {}\n\n      sel.addRange(range);\n      targetElement.focus();\n    }\n  }, {\n    key: \"replaceTriggerText\",\n    value: function replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n      var info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (info !== undefined) {\n        var context = this.tribute.current;\n        var replaceEvent = new CustomEvent('tribute-replaced', {\n          detail: {\n            item: item,\n            instance: context,\n            context: info,\n            event: originalEvent\n          }\n        });\n\n        if (!this.isContentEditable(context.element)) {\n          var myField = this.tribute.current.element;\n          var textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : ' ';\n          text += textSuffix;\n          var startPos = info.mentionPosition;\n          var endPos = info.mentionPosition + info.mentionText.length + textSuffix.length;\n          myField.value = myField.value.substring(0, startPos) + text + myField.value.substring(endPos, myField.value.length);\n          myField.selectionStart = startPos + text.length;\n          myField.selectionEnd = startPos + text.length;\n        } else {\n          // add a space to the end of the pasted text\n          var _textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : '\\xA0';\n\n          text += _textSuffix;\n          this.pasteHtml(text, info.mentionPosition, info.mentionPosition + info.mentionText.length + !this.tribute.autocompleteMode);\n        }\n\n        context.element.dispatchEvent(replaceEvent);\n      }\n    }\n  }, {\n    key: \"pasteHtml\",\n    value: function pasteHtml(html, startPos, endPos) {\n      var range, sel;\n      sel = this.getWindowSelection();\n      range = this.getDocument().createRange();\n      range.setStart(sel.anchorNode, startPos);\n      range.setEnd(sel.anchorNode, endPos);\n      range.deleteContents();\n      var el = this.getDocument().createElement('div');\n      el.innerHTML = html;\n      var frag = this.getDocument().createDocumentFragment(),\n          node,\n          lastNode;\n\n      while (node = el.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n\n      range.insertNode(frag); // Preserve the selection\n\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(range);\n      }\n    }\n  }, {\n    key: \"getWindowSelection\",\n    value: function getWindowSelection() {\n      if (this.tribute.collection.iframe) {\n        return this.tribute.collection.iframe.contentWindow.getSelection();\n      }\n\n      return window.getSelection();\n    }\n  }, {\n    key: \"getNodePositionInParent\",\n    value: function getNodePositionInParent(element) {\n      if (element.parentNode === null) {\n        return 0;\n      }\n\n      for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n        var node = element.parentNode.childNodes[i];\n\n        if (node === element) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: \"getContentEditableSelectedPath\",\n    value: function getContentEditableSelectedPath(ctx) {\n      var sel = this.getWindowSelection();\n      var selected = sel.anchorNode;\n      var path = [];\n      var offset;\n\n      if (selected != null) {\n        var i;\n        var ce = selected.contentEditable;\n\n        while (selected !== null && ce !== 'true') {\n          i = this.getNodePositionInParent(selected);\n          path.push(i);\n          selected = selected.parentNode;\n\n          if (selected !== null) {\n            ce = selected.contentEditable;\n          }\n        }\n\n        path.reverse(); // getRangeAt may not exist, need alternative\n\n        offset = sel.getRangeAt(0).startOffset;\n        return {\n          selected: selected,\n          path: path,\n          offset: offset\n        };\n      }\n    }\n  }, {\n    key: \"getTextPrecedingCurrentSelection\",\n    value: function getTextPrecedingCurrentSelection() {\n      var context = this.tribute.current,\n          text = '';\n\n      if (!this.isContentEditable(context.element)) {\n        var textComponent = this.tribute.current.element;\n\n        if (textComponent) {\n          var startPos = textComponent.selectionStart;\n\n          if (textComponent.value && startPos >= 0) {\n            text = textComponent.value.substring(0, startPos);\n          }\n        }\n      } else {\n        var selectedElem = this.getWindowSelection().anchorNode;\n\n        if (selectedElem != null) {\n          var workingNodeContent = selectedElem.textContent;\n          var selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset;\n\n          if (workingNodeContent && selectStartOffset >= 0) {\n            text = workingNodeContent.substring(0, selectStartOffset);\n          }\n        }\n      }\n\n      return text;\n    }\n  }, {\n    key: \"getLastWordInText\",\n    value: function getLastWordInText(text) {\n      text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n\n      var wordsArray = text.split(/\\s+/);\n      var worldsCount = wordsArray.length - 1;\n      return wordsArray[worldsCount].trim();\n    }\n  }, {\n    key: \"getTriggerInfo\",\n    value: function getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n      var _this2 = this;\n\n      var ctx = this.tribute.current;\n      var selected, path, offset;\n\n      if (!this.isContentEditable(ctx.element)) {\n        selected = this.tribute.current.element;\n      } else {\n        var selectionInfo = this.getContentEditableSelectedPath(ctx);\n\n        if (selectionInfo) {\n          selected = selectionInfo.selected;\n          path = selectionInfo.path;\n          offset = selectionInfo.offset;\n        }\n      }\n\n      var effectiveRange = this.getTextPrecedingCurrentSelection();\n      var lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange);\n\n      if (isAutocomplete) {\n        return {\n          mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n          mentionText: lastWordOfEffectiveRange,\n          mentionSelectedElement: selected,\n          mentionSelectedPath: path,\n          mentionSelectedOffset: offset\n        };\n      }\n\n      if (effectiveRange !== undefined && effectiveRange !== null) {\n        var mostRecentTriggerCharPos = -1;\n        var triggerChar;\n        this.tribute.collection.forEach(function (config) {\n          var c = config.trigger;\n          var idx = config.requireLeadingSpace ? _this2.lastIndexWithLeadingSpace(effectiveRange, c) : effectiveRange.lastIndexOf(c);\n\n          if (idx > mostRecentTriggerCharPos) {\n            mostRecentTriggerCharPos = idx;\n            triggerChar = c;\n            requireLeadingSpace = config.requireLeadingSpace;\n          }\n        });\n\n        if (mostRecentTriggerCharPos >= 0 && (mostRecentTriggerCharPos === 0 || !requireLeadingSpace || /[\\xA0\\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos - 1, mostRecentTriggerCharPos)))) {\n          var currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + 1, effectiveRange.length);\n          triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + 1);\n          var firstSnippetChar = currentTriggerSnippet.substring(0, 1);\n          var leadingSpace = currentTriggerSnippet.length > 0 && (firstSnippetChar === ' ' || firstSnippetChar === '\\xA0');\n\n          if (hasTrailingSpace) {\n            currentTriggerSnippet = currentTriggerSnippet.trim();\n          }\n\n          var regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n          this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n          if (!leadingSpace && (menuAlreadyActive || !regex.test(currentTriggerSnippet))) {\n            return {\n              mentionPosition: mostRecentTriggerCharPos,\n              mentionText: currentTriggerSnippet,\n              mentionSelectedElement: selected,\n              mentionSelectedPath: path,\n              mentionSelectedOffset: offset,\n              mentionTriggerChar: triggerChar\n            };\n          }\n        }\n      }\n    }\n  }, {\n    key: \"lastIndexWithLeadingSpace\",\n    value: function lastIndexWithLeadingSpace(str, _char) {\n      var reversedStr = str.split('').reverse().join('');\n      var index = -1;\n\n      for (var cidx = 0, len = str.length; cidx < len; cidx++) {\n        var firstChar = cidx === str.length - 1;\n        var leadingSpace = /\\s/.test(reversedStr[cidx + 1]);\n        var match = _char === reversedStr[cidx];\n\n        if (match && (firstChar || leadingSpace)) {\n          index = str.length - 1 - cidx;\n          break;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: \"isContentEditable\",\n    value: function isContentEditable(element) {\n      return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    }\n  }, {\n    key: \"isMenuOffScreen\",\n    value: function isMenuOffScreen(coordinates, menuDimensions) {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height;\n      var menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width;\n      var menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height;\n      var menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width;\n      return {\n        top: menuTop < Math.floor(windowTop),\n        right: menuRight > Math.ceil(windowLeft + windowWidth),\n        bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n        left: menuLeft < Math.floor(windowLeft)\n      };\n    }\n  }, {\n    key: \"getMenuDimensions\",\n    value: function getMenuDimensions() {\n      // Width of the menu depends of its contents and position\n      // We must check what its width would be without any obstruction\n      // This way, we can achieve good positioning for flipping the menu\n      var dimensions = {\n        width: null,\n        height: null\n      };\n      this.tribute.menu.style.cssText = \"top: 0px;\\n                                 left: 0px;\\n                                 position: fixed;\\n                                 display: block;\\n                                 visibility; hidden;\";\n      dimensions.width = this.tribute.menu.offsetWidth;\n      dimensions.height = this.tribute.menu.offsetHeight;\n      this.tribute.menu.style.cssText = \"display: none;\";\n      return dimensions;\n    }\n  }, {\n    key: \"getTextAreaOrInputUnderlinePosition\",\n    value: function getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n      var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n      var isFirefox = window.mozInnerScreenX !== null;\n      var div = this.getDocument().createElement('div');\n      div.id = 'input-textarea-caret-position-mirror-div';\n      this.getDocument().body.appendChild(div);\n      var style = div.style;\n      var computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle;\n      style.whiteSpace = 'pre-wrap';\n\n      if (element.nodeName !== 'INPUT') {\n        style.wordWrap = 'break-word';\n      } // position off-screen\n\n\n      style.position = 'absolute';\n      style.visibility = 'hidden'; // transfer the element's properties to the div\n\n      properties.forEach(function (prop) {\n        style[prop] = computed[prop];\n      });\n\n      if (isFirefox) {\n        style.width = \"\".concat(parseInt(computed.width) - 2, \"px\");\n        if (element.scrollHeight > parseInt(computed.height)) style.overflowY = 'scroll';\n      } else {\n        style.overflow = 'hidden';\n      }\n\n      div.textContent = element.value.substring(0, position);\n\n      if (element.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, ' ');\n      }\n\n      var span = this.getDocument().createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      var rect = element.getBoundingClientRect();\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var top = 0;\n      var left = 0;\n\n      if (this.menuContainerIsBody) {\n        top = rect.top;\n        left = rect.left;\n      }\n\n      var coordinates = {\n        top: top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n        left: left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n      };\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var menuDimensions = this.getMenuDimensions();\n      var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.right) {\n        coordinates.right = windowWidth - coordinates.left;\n        coordinates.left = 'auto';\n      }\n\n      var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n      if (menuIsOffScreen.bottom) {\n        var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n        var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n        coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop);\n        coordinates.top = 'auto';\n      }\n\n      menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.left) {\n        coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n        delete coordinates.right;\n      }\n\n      if (menuIsOffScreen.top) {\n        coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n        delete coordinates.bottom;\n      }\n\n      this.getDocument().body.removeChild(div);\n      return coordinates;\n    }\n  }, {\n    key: \"getContentEditableCaretPosition\",\n    value: function getContentEditableCaretPosition(selectedNodePosition) {\n      var markerTextChar = '﻿';\n      var markerEl,\n          markerId = \"sel_\".concat(new Date().getTime(), \"_\").concat(Math.random().toString().substr(2));\n      var range;\n      var sel = this.getWindowSelection();\n      var prevRange = sel.getRangeAt(0);\n      range = this.getDocument().createRange();\n      range.setStart(sel.anchorNode, selectedNodePosition);\n      range.setEnd(sel.anchorNode, selectedNodePosition);\n      range.collapse(false); // Create the marker element containing a single invisible character using DOM methods and insert it\n\n      markerEl = this.getDocument().createElement('span');\n      markerEl.id = markerId;\n      markerEl.appendChild(this.getDocument().createTextNode(markerTextChar));\n      range.insertNode(markerEl);\n      sel.removeAllRanges();\n      sel.addRange(prevRange);\n      var rect = markerEl.getBoundingClientRect();\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var left = 0;\n      var top = 0;\n\n      if (this.menuContainerIsBody) {\n        left = rect.left;\n        top = rect.top;\n      } else {\n        left = markerEl.offsetLeft;\n        top = markerEl.offsetTop;\n      }\n\n      var coordinates = {\n        left: left + windowLeft,\n        top: top + markerEl.offsetHeight + windowTop\n      };\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var menuDimensions = this.getMenuDimensions();\n      var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.right) {\n        coordinates.left = 'auto';\n        coordinates.right = windowWidth - rect.left - windowLeft;\n      }\n\n      var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n      if (menuIsOffScreen.bottom) {\n        var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n        var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n        coordinates.top = 'auto';\n        coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top);\n      }\n\n      menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.left) {\n        coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n        delete coordinates.right;\n      }\n\n      if (menuIsOffScreen.top) {\n        coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n        delete coordinates.bottom;\n      }\n\n      markerEl.parentNode.removeChild(markerEl);\n      return coordinates;\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView(elem) {\n      var reasonableBuffer = 20,\n          clientRect;\n      var maxScrollDisplacement = 100;\n      var e = this.menu;\n      if (typeof e === 'undefined') return;\n\n      while (clientRect === undefined || clientRect.height === 0) {\n        clientRect = e.getBoundingClientRect();\n\n        if (clientRect.height === 0) {\n          e = e.childNodes[0];\n\n          if (e === undefined || !e.getBoundingClientRect) {\n            return;\n          }\n        }\n      }\n\n      var elemTop = clientRect.top;\n      var elemBottom = elemTop + clientRect.height;\n\n      if (elemTop < 0) {\n        window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer);\n      } else if (elemBottom > window.innerHeight) {\n        var maxY = window.pageYOffset + clientRect.top - reasonableBuffer;\n\n        if (maxY - window.pageYOffset > maxScrollDisplacement) {\n          maxY = window.pageYOffset + maxScrollDisplacement;\n        }\n\n        var targetY = window.pageYOffset - (window.innerHeight - elemBottom);\n\n        if (targetY > maxY) {\n          targetY = maxY;\n        }\n\n        window.scrollTo(0, targetY);\n      }\n    }\n  }, {\n    key: \"menuContainerIsBody\",\n    get: function get() {\n      return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n    }\n  }]);\n\n  return TributeRange;\n}();\n\nvar _default = TributeRange;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Thanks to https://github.com/mattyork/fuzzy\nvar TributeSearch =\n/*#__PURE__*/\nfunction () {\n  function TributeSearch(tribute) {\n    _classCallCheck(this, TributeSearch);\n\n    this.tribute = tribute;\n    this.tribute.search = this;\n  }\n\n  _createClass(TributeSearch, [{\n    key: \"simpleFilter\",\n    value: function simpleFilter(pattern, array) {\n      var _this = this;\n\n      return array.filter(function (string) {\n        return _this.test(pattern, string);\n      });\n    }\n  }, {\n    key: \"test\",\n    value: function test(pattern, string) {\n      return this.match(pattern, string) !== null;\n    }\n  }, {\n    key: \"match\",\n    value: function match(pattern, string, opts) {\n      opts = opts || {};\n      var patternIdx = 0,\n          result = [],\n          len = string.length,\n          totalScore = 0,\n          currScore = 0,\n          pre = opts.pre || '',\n          post = opts.post || '',\n          compareString = opts.caseSensitive && string || string.toLowerCase(),\n          ch,\n          compareChar;\n\n      if (opts.skip) {\n        return {\n          rendered: string,\n          score: 0\n        };\n      }\n\n      pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n      var patternCache = this.traverse(compareString, pattern, 0, 0, []);\n\n      if (!patternCache) {\n        return null;\n      }\n\n      return {\n        rendered: this.render(string, patternCache.cache, pre, post),\n        score: patternCache.score\n      };\n    }\n  }, {\n    key: \"traverse\",\n    value: function traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n      // if the pattern search at end\n      if (pattern.length === patternIndex) {\n        // calculate score and copy the cache containing the indices where it's found\n        return {\n          score: this.calculateScore(patternCache),\n          cache: patternCache.slice()\n        };\n      } // if string at end or remaining pattern > remaining string\n\n\n      if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n        return undefined;\n      }\n\n      var c = pattern[patternIndex];\n      var index = string.indexOf(c, stringIndex);\n      var best, temp;\n\n      while (index > -1) {\n        patternCache.push(index);\n        temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache);\n        patternCache.pop(); // if downstream traversal failed, return best answer so far\n\n        if (!temp) {\n          return best;\n        }\n\n        if (!best || best.score < temp.score) {\n          best = temp;\n        }\n\n        index = string.indexOf(c, index + 1);\n      }\n\n      return best;\n    }\n  }, {\n    key: \"calculateScore\",\n    value: function calculateScore(patternCache) {\n      var score = 0;\n      var temp = 1;\n      patternCache.forEach(function (index, i) {\n        if (i > 0) {\n          if (patternCache[i - 1] + 1 === index) {\n            temp += temp + 1;\n          } else {\n            temp = 1;\n          }\n        }\n\n        score += temp;\n      });\n      return score;\n    }\n  }, {\n    key: \"render\",\n    value: function render(string, indices, pre, post) {\n      var rendered = string.substring(0, indices[0]);\n      indices.forEach(function (index, i) {\n        rendered += pre + string[index] + post + string.substring(index + 1, indices[i + 1] ? indices[i + 1] : string.length);\n      });\n      return rendered;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(pattern, arr, opts) {\n      var _this2 = this;\n\n      opts = opts || {};\n      return arr.reduce(function (prev, element, idx, arr) {\n        var str = element;\n\n        if (opts.extract) {\n          str = opts.extract(element);\n\n          if (!str) {\n            // take care of undefineds / nulls / etc.\n            str = '';\n          }\n        }\n\n        var rendered = _this2.match(pattern, str, opts);\n\n        if (rendered != null) {\n          prev[prev.length] = {\n            string: rendered.rendered,\n            score: rendered.score,\n            index: idx,\n            original: element\n          };\n        }\n\n        return prev;\n      }, []).sort(function (a, b) {\n        var compare = b.score - a.score;\n        if (compare) return compare;\n        return a.index - b.index;\n      });\n    }\n  }]);\n\n  return TributeSearch;\n}();\n\nvar _default = TributeSearch;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _Tribute = _interopRequireDefault(require(\"./Tribute\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n* Tribute.js\n* Native ES6 JavaScript @mention Plugin\n**/\nvar _default = _Tribute[\"default\"];\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{\"./Tribute\":1}],7:[function(require,module,exports){\n\"use strict\";\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function (predicate) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n\n    return undefined;\n  };\n}\n\nif (window && typeof window.CustomEvent !== \"function\") {\n  var CustomEvent = function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  };\n\n  if (typeof window.Event !== 'undefined') {\n    CustomEvent.prototype = window.Event.prototype;\n  }\n\n  window.CustomEvent = CustomEvent;\n}\n\n},{}]},{},[6])(6)\n});\n","/* eslint-disable require-jsdoc, no-console */\n\nimport areachart from \"src/decidim/vizzs/areachart\"\n\n$(() => {\n\n  const metricsData = {};\n  const metricsContainer = {};\n  const metricsParams = {};\n\n  const query = () => {\n    let metricsQuery = `metrics(names: ${metricsParams.names}, space_type: \"${metricsParams.spaceType}\", space_id: ${metricsParams.spaceId}) { name history { key value } }`;\n    return {query: `{ ${metricsQuery} }`};\n  }\n\n  const parameterize = (metrics) => {\n    metricsParams.names = JSON.stringify(metrics || []);\n    metricsParams.spaceType = $(\"#metrics #metrics-space_type\").val() || null;\n    metricsParams.spaceId = $(\"#metrics #metrics-space_id\").val() || null;\n  }\n\n  const fetch = (metrics) => $.post(\"/api\", query(metrics));\n\n  const downloadMetricData = (event) => {\n    event.preventDefault();\n    let metricName = $(event.target).parents(\".metric-downloader\").data(\"metric\");\n    let csvContent = \"data:text/csv;charset=utf-8,\";\n\n    csvContent += \"key,value\\r\\n\";\n    metricsData[metricName].forEach((metricData)  => {\n      csvContent += `${metricData.key},${metricData.value}\\r\\n`;\n    });\n\n    // Required for FF\n    let link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodeURI(csvContent));\n    link.setAttribute(\"download\", `${metricName}_metric_data.csv`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  $(\".metric-chart:visible\").each((_index, container) => {\n    metricsContainer[$(container).data(\"metric\")] = container;\n  });\n  $(\".metric-downloader\").each((_index, container) => {\n    container.onclick = downloadMetricData;\n  });\n\n  if (!$.isEmptyObject(metricsContainer)) {\n    parameterize(Object.keys(metricsContainer))\n    fetch().then((response) => {\n      if (response.data) {\n        $.each(response.data.metrics, (_index, metricData) => {\n          let container = metricsContainer[metricData.name];\n          if (metricData.history.length === 0) {\n            $(container).remove();\n            return;\n          }\n          let info = $(container).data(\"info\");\n          metricsData[metricData.name] = $.extend(true, [], metricData.history);\n          areachart({\n            container: `#${container.id}`,\n            data: metricData.history,\n            title: info.title,\n            objectName: info.object,\n            ...$(container).data()\n          });\n        });\n      } else if (response.errors) {\n        console.log(\"Something wrong happened when fetching metrics:\");\n        $.each(response.errors, (_index, error) => {\n          console.log(error.message);\n        });\n        $(\"#metrics\").remove();\n      }\n    }).fail((err) => {\n      console.log(`Something wrong happened when fetching metrics: ${err.statusText}`);\n      $(\"#metrics\").remove();\n    });\n  }\n});\n","/* eslint-disable require-jsdoc, id-length, no-undefined, no-unused-vars, multiline-ternary, no-ternary, no-nested-ternary, no-invalid-this */\n/* eslint prefer-reflect: [\"error\", { \"exceptions\": [\"call\"] }] */\n/* eslint dot-location: [\"error\", \"property\"] */\n/* eslint no-unused-vars: 0 */\n\nimport { select, mouse } from \"d3-selection\";\nimport { min, max, extent, ascending, bisector } from \"d3-array\";\nimport { scaleTime, scaleLinear } from \"d3-scale\";\nimport { axisLeft, axisBottom } from \"d3-axis\";\nimport { timeMonth } from \"d3-time\";\nimport { timeFormat, isoParse } from \"d3-time-format\";\nimport { area, line } from \"d3-shape\";\n\n// lib\nexport default function areachart(opts = {}) {\n\n  const parseData = (data) => {\n    // format the data\n    data.forEach((d) => {\n      d.key = isoParse(d.key)\n      d.value = Number(d.value)\n    });\n\n    // order by date\n    return data.sort((x, y) => ascending(x.key, y.key))\n  }\n\n  // OPTIONAL: Helper function to accumulates all data values\n  const aggregate = (agg) => agg.map((item, index, array) => {\n    if (index > 0) {\n      item.value += array[index - 1].value\n    }\n    return item\n  })\n\n  // parse opts\n  let data = parseData(opts.data)\n  let title = opts.title\n  let objectName = opts.objectName || \"\"\n  let container = select(opts.container)\n  let showAxis = opts.axis || false\n  let ratio = (opts.ratio || \"\").split(\":\").reduce((a, b) => a / b) || (4 / 3)\n  let showTooltip = Object.is(opts.tip, undefined) ? true : opts.tip\n  let cumulative = opts.agg || false\n\n  if (cumulative) {\n    data = aggregate(data)\n  }\n\n  // set the dimensions and margins of the graph\n  let margin = {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  }\n\n  let width = Number(container.node().getBoundingClientRect().width) - margin.left - margin.right\n  let height = (width / ratio) - margin.top - margin.bottom\n  let titlePadding = min([width / 10, 32])\n\n  // set the ranges\n  let x = scaleTime().range([0, width]);\n  let y = scaleLinear().range([height, 0]);\n\n  // define the area\n  let _area = area()\n    .x((d) => x(d.key))\n    .y0(height)\n    .y1((d) => y(d.value));\n\n  // define the line\n  let valueline = line()\n    .x((d) => x(d.key))\n    .y((d) => y(d.value));\n\n  let svg = container.append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  // scale the range of the data\n  x.domain(extent(data, (d) => d.key));\n  y.domain([0, max(data, (d) => d.value)]).nice();\n\n  // add the valueline path.\n  let topLine = svg.append(\"path\")\n    .data([data])\n    .attr(\"class\", \"line\")\n    .attr(\"d\", valueline)\n\n  // add the area\n  svg.append(\"path\")\n    .data([data])\n    .attr(\"class\", \"area\")\n    .attr(\"d\", _area)\n\n  if (showTooltip) {\n    // tooltip\n    let circle = svg.append(\"circle\")\n      .attr(\"class\", \"circle\")\n      .attr(\"r\", 6)\n      .style(\"display\", \"none\")\n\n    let tooltip = select(\"body\").append(\"div\")\n      .attr(\"id\", `${container.node().id}-tooltip`)\n      .attr(\"class\", \"chart-tooltip\")\n      .style(\"opacity\", 0)\n\n    svg\n      .on(\"mouseover\", () => {\n        circle.style(\"display\", null)\n        tooltip.style(\"opacity\", 1)\n      })\n      .on(\"mouseout\", () => {\n        circle.style(\"display\", \"none\")\n        tooltip.style(\"opacity\", 0)\n      })\n      .on(\"mousemove\", function() {\n        let x0 = x.invert(mouse(this)[0])\n        let i = bisector((d) => d.key).left(data, x0, 1)\n        let d0 = data[i - 1]\n        let d1 = data[i]\n        let d = (x0 - d0.key > d1.key - x0) ? d1 : d0\n\n        // svg position relative to document\n        let coords = {\n          x: window.pageXOffset + container.node().getBoundingClientRect().left,\n          y: window.pageYOffset + container.node().getBoundingClientRect().top\n        }\n\n        let tooltipContent = `\n          <div class=\"tooltip-content\">\n            ${timeFormat(\"%e %B %Y\")(d.key)}<br />\n            ${d.value.toLocaleString()} ${objectName}\n          </div>`\n\n        circle.attr(\"transform\", `translate(${x(d.key)},${y(d.value)})`)\n        tooltip.html(tooltipContent)\n          .style(\"left\", `${coords.x + x(d.key)}px`)\n          .style(\"top\", `${coords.y + y(d.value)}px`)\n      })\n  }\n\n  if (showAxis) {\n    let xAxis = axisBottom(x)\n      .ticks(timeMonth)\n      .tickFormat(timeFormat(\"%b %y\"))\n      .tickSize(-height)\n    let yAxis = axisLeft(y)\n      .ticks(5)\n      .tickSize(8)\n\n    let _xAxis = (g) => {\n      g.call(xAxis)\n      g.select(\".domain\").remove()\n      g.selectAll(\".tick line\").attr(\"class\", \"dashed\")\n      g.selectAll(\".tick text\").attr(\"y\", 6)\n    }\n    let _yAxis = (g) => {\n      g.call(yAxis)\n      g.select(\".domain\").remove()\n      g.select(\".tick:first-of-type\").remove()\n      g.selectAll(\".tick text\").attr(\"text-anchor\", \"start\").attr(\"x\", 6)\n    }\n\n    // custom X-Axis\n    svg.append(\"g\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .call(_xAxis);\n\n    // custom Y-Axis\n    svg.append(\"g\")\n      .call(_yAxis)\n\n    // last circle (current value)\n    let g = svg.append(\"g\")\n      .data([data])\n      .attr(\"transform\", (d) => `translate(${x(d[d.length - 1].key)},${y(d[d.length - 1].value)})`)\n\n    g.append(\"circle\")\n      .attr(\"class\", \"circle\")\n      .attr(\"r\", 8)\n\n    g.append(\"text\")\n      .attr(\"class\", \"sum\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"dx\", -8 * 2)\n      .text((d) => d[d.length - 1].value.toLocaleString())\n\n  } else {\n    // add the title group\n    let g = svg.append(\"g\")\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"transform\", `translate(${titlePadding},${titlePadding})`)\n\n    let titleLines = 0\n\n    if (title.length) {\n      g.append(\"text\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"class\", \"title\")\n        .text(title)\n        .call(function(fulltext, wrapwidth, start = 0) {\n          fulltext.each(function() {\n            let text = select(this)\n            let word = \"\"\n            let words = text.text().split(/\\s+/).reverse()\n            let _line = []\n            let lineNumber = 0\n            let lineHeight = 1.1\n            let _x = text.attr(\"x\")\n            let _y = text.attr(\"y\")\n            let dy = 0\n            let tspan = text.text(null)\n              .append(\"tspan\")\n              .attr(\"x\", _x)\n              .attr(\"y\", _y)\n              .attr(\"dy\", `${dy}em`)\n\n            /* eslint-disable no-cond-assign, no-plusplus */\n            while (word = words.pop()) {\n              _line.push(word);\n              tspan.text(_line.join(\" \"));\n              if (tspan.node().getComputedTextLength() > wrapwidth) {\n                _line.pop()\n                tspan.text(_line.join(\" \"))\n                _line = [word]\n                tspan = text.append(\"tspan\")\n                  .attr(\"x\", _x)\n                  .attr(\"y\", _y)\n                  .attr(\"dy\", `${(++lineNumber * lineHeight) + dy}em`)\n                  .text(word);\n              }\n            }\n\n            titleLines = lineNumber * lineHeight\n          });\n        }, width - (titlePadding * 2))\n    }\n\n    let fontSize = parseFloat(getComputedStyle(g.node()).fontSize);\n\n    g.append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"dy\", title.length ? (titlePadding * 2) + (titleLines * fontSize) : (titlePadding * 1.25))\n      .attr(\"class\", \"sum\")\n      .text(data[data.length - 1].value.toLocaleString())\n  }\n}\n"],"names":["$","document","on","event","preventDefault","link","currentTarget","$modal","dataset","open","html","ajax","type","url","openUrl","success","$html","foundation","error","request","status","DataPicker","pickers","this","modal","_createModalContainer","appendTo","current","each","_index","picker","_this","activate","_createClass","$picker","_setCurrentPicker","name","values","multiple","_index2","div","value","data","prepend","hasClass","isMultiPicker","_this2","_targetFromEvent","_openPicker","tagName","_removeValue","parentNode","autosort","_sort","toggleClass","attr","map","$link","val","text","get","savedData","_this3","_choose","interactive","modify","target","_load","$target","find","done","resp","modalContent","_this4","_handleLinks","_handleCheckboxes","content","click","chooseUrl","_this5","checkbox","$checkbox","checked","_this6","_targetFromValue","change","close","opts","options","Object","assign","dataText","_escape","choosenOption","input","$input","trigger","_removeErrors","_close","children","sort","item1","item2","detach","fadeoutTime","navigator","webdriver","fadeOut","_this7","remove","parent","removeClass","str","replace","char","charCodeAt","formDatePicker","node","language","initialDate","pickTime","languageProps","fdatepicker","dates","format","disableDblClickSelection","leftArrow","rightArrow","CheckBoxesTree","checkboxesTree","querySelectorAll","globalChecks","forEach","global","classList","add","checkGlobalCheck","addEventListener","checkTheCheckBoxes","checkTheCheckParent","checkboxes","index","length","includes","theForm","idx","elem","disabled","targetChecks","checkStatus","indeterminate","checksContext","totalInputs","checkedInputs","indeterminateInputs","Array","from","filter","subfilters","nextElementSibling","contains","checkBoxContext","parents","parentCheck","querySelector","totalCheckSiblings","checkedSiblings","indeterminateSiblings","sibling","FormFilterComponent","$form","context","func","wait","timeout","id","_getUID","mounted","changeEvents","theCheckBoxesTree","theDataPicker","window","_updateInitialState","_onFormChange","bind","args","clearTimeout","setTimeout","Reflect","apply","_onPopState","Decidim","PopStateHandler","popStateSubmiter","off","unregisterCallback","queue","contentContainer","closest","currentFormRequest","e","abort","originalEvent","detail","addClass","setContainerForm","registerCallback","currentState","_currentStateAndPath","initialPath","initialState","_path","replaceState","withHost","state","path","location","pathname","search","hash","origin","regexpResult","decodeURIComponent","_getLocation","match","reduce","acc","result","key","array","push","order","element","clear","_clearForm","filterParams","_parseLocationFilterValues","currentOrder","_parseLocationOrderValue","keys","fieldName","isArray","updateChecked","pickerState","load","Rails","fire","newPath","newState","pushState","_saveFilters","formAction","params","serialize","indexOf","save","Date","setUTCMilliseconds","Math","floor","random","pathWithQueryStrings","sessionStorage","pathName","setItem","JSON","stringify","jQuery","fn","lb","days","daysShort","daysMin","months","monthsShort","today","$hashtagContainer","nodatafound","noMatchTemplate","cursor","__quill","getText","tribute","Tribute","cb","post","query","then","response","hashtags","fail","always","$parent","removeAttr","remoteSearch","positionMenu","menuContainer","fillAttr","lookup","item","selectTemplate","range","isContentEditable","quill","insertText","original","Quill","sources","API","position","next","getLength","setSelection","menuItemTemplate","$qlEditor","attach","isActive","$mentionContainer","callback","debounce","users","allowSpaces","menuItemLimit","selectClass","nickname","svg","__typename","iconsPath","config","membersCount","avatarUrl","setupEvents","$element","menu","body","getDocument","appendChild","sessionTimeOutEnabled","$timeoutModal","timeoutInSeconds","parseInt","secondsUntilTimeoutPath","heartbeatPath","interval","preventTimeOutSeconds","endsAt","dayjs","lastAction","$continueSessionButton","lastActivityCheck","preventTimeOutUntil","css","isNaN","setTimer","secondsUntilExpiration","heartbeat","method","contentType","exitInterval","setInterval","seconds","timeSinceLastActivityCheckInSeconds","round","headers","secondsUntilSessionExpires","seconds_remaining","mousemove","scroll","keypress","ajaxComplete","_event","_xhr","settings","clearInterval","enableSessionTimeout","disableSessionTimeout","UTCDate","UTC","arguments","Datepicker","that","autoShow","undefined","closeButton","split","isRTL","rtl","DPGlobal","parseFormat","formatText","isInline","isInput","is","component","hasInput","onRender","linkField","linkFormat","minuteStep","pickerPosition","faCSSprefix","closeIcon","minView","convertViewMode","maxView","modes","startViewMode","startView","viewMode","forceParse","template","proxy","mousedown","show","hide","siblings","append","autoclose","keyboardNavigation","todayBtn","todayHighlight","calendarWeeks","i","weekStart","weekEnd","startDate","Infinity","endDate","daysOfWeekDisabled","datesDisabled","setStartDate","setEndDate","setDaysOfWeekDisabled","setDatesDisabled","date","viewDate","parseDate","setValue","fillDow","fillMonths","update","showMode","_attachEvents","prototype","constructor","_events","_detachEvents","focus","keyup","keydown","dblclick","stopPropagation","blur","el","ev","height","outerHeight","place","datepicker","getDate","d","getUTCDate","getTime","getTimezoneOffset","setDate","setUTCDate","formatted","getFormattedDate","formatDate","updateNavArrows","valueOf","zIndexes","zIndex","a","b","pop","textbox","offset","width","outerWidth","fullOffsetTop","top","offsetLeft","left","canShowTop","scrollTop","canShowBottom","fromArgs","currentVal","fill","dowCnt","cell","year","getUTCFullYear","month","getUTCMonth","dayMonth","hours","getUTCHours","minutes","getUTCMinutes","startYear","startMonth","endYear","endMonth","currentDate","titleFormat","en","toggle","prevMonth","day","getDaysInMonth","getUTCDay","nextMonth","clsName","getDay","getFullYear","calWeek","getMonth","inArray","empty","join","actual","currentYear","end","eq","slice","yearCont","hour","visibility","nodeName","toLowerCase","className","dir","navStep","moveHour","moveDate","moveMonth","moveYear","getHours","getMinutes","getSeconds","_setDate","getUTCSeconds","setUTCMonth","setUTCFullYear","substr","oldViewMode","which","new_date","setUTCHours","new_month","test","mag","abs","dateWithinRange","keyCode","newDate","newViewDate","dateChanged","ctrlKey","shiftKey","newViewMode","max","min","changeViewDate","reset","option","shift","$this","_typeof","extend","defaults","Constructor","navFnc","isLeapYear","validParts","nonpunctuation","separators","parts","Error","part_re","part","exec","Datetimepicker","call","filtered","parsed","setters_order","setters_map","hh","v","h","ii","setUTCMinutes","ss","setUTCSeconds","s","yyyy","yy","m","M","MM","mm","dd","cnt","toString","substring","seps","headTemplate","contTemplate","footTemplate","f","r","n","t","o","u","code","p","exports","require","module","defineProperty","_TributeEvents","_interopRequireDefault","_TributeMenuEvents","_TributeRange","_TributeSearch","obj","__esModule","_slicedToArray","arr","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","Symbol","iterator","err","_iterableToArrayLimit","TypeError","_nonIterableRest","_defineProperties","props","descriptor","enumerable","configurable","writable","_default","_ref","_ref$values","_ref$iframe","iframe","_ref$selectClass","_ref$trigger","_ref$autocompleteMode","autocompleteMode","_ref$selectTemplate","_ref$menuItemTemplate","_ref$lookup","_ref$fillAttr","_ref$collection","collection","_ref$menuContainer","_ref$noMatchTemplate","_ref$requireLeadingSp","requireLeadingSpace","_ref$allowSpaces","_ref$replaceTextSuffi","replaceTextSuffix","_ref$positionMenu","_ref$spaceSelectsMatc","spaceSelectsMatch","_ref$searchOpts","searchOpts","_ref$menuItemLimit","instance","_classCallCheck","menuSelected","inputEvent","hasTrailingSpace","defaultSelectTemplate","defaultMenuItemTemplate","console","warn","protoProps","staticProps","matchItem","string","NodeList","HTMLCollection","_attach","hasAttribute","ensureEditable","events","setAttribute","inputTypes","contentEditable","wrapper","createElement","ul","scrollTo","mentionText","currentMentionTextSnapshot","createMenu","tributeMenu","menuEvents","processValues","items","pre","skip","extract","filteredItems","positionMenuAtCaret","noMatchEvent","CustomEvent","dispatchEvent","hideMenu","innerHTML","fragment","createDocumentFragment","li","_this2$_findLiTarget2","_findLiTarget","movementY","setActiveLi","getAttribute","collectionIndex","activeElement","placeCaretAtEnd","externalTrigger","insertTextAtCursor","insertAtCaret","showMenuFor","getSelection","createRange","selectNodeContents","collapse","sel","removeAllRanges","addRange","createTextRange","textRange","moveToElementText","select","getRangeAt","deleteContents","textNode","createTextNode","insertNode","textarea","scrollPos","caretPos","selectionStart","front","back","selectionEnd","style","cssText","replaceText","replaceTriggerText","newValues","concat","_append","_detach","unbind","removeAttribute","TributeEvents","boundKeydown","boundKeyup","boundInput","removeEventListener","shouldDeactivate","commandEvent","callbacks","getElementsByClassName","selectItemAtIndex","updateSelection","triggerChar","getKeyCode","triggers","eventKeyPressed","info","getTriggerInfo","mentionTriggerChar","selectedPath","mentionSelectedPath","selectedOffset","mentionSelectedOffset","collectionItem","enter","escape","tab","space","up","count","selected","scrollHeight","down","lis","liClientRect","getBoundingClientRect","menuClientRect","bottom","scrollDistance","_scrollDistance","includeMargin","currentStyle","getComputedStyle","parseFloat","marginTop","marginBottom","TributeMenuEvents","menuClickEvent","menuContainerScrollEvent","windowResizeEvent","immediate","_arguments","callNow","TributeRange","contentWindow","coordinates","getContentEditableCaretPosition","mentionPosition","getTextAreaOrInputUnderlinePosition","right","scrollIntoView","menuDimensions","offsetWidth","offsetHeight","menuIsOffScreen","isMenuOffScreen","menuIsOffScreenHorizontally","innerWidth","menuIsOffScreenVertically","innerHeight","targetElement","childNodes","nextSibling","previousSibling","getWindowSelection","setStart","setEnd","replaceEvent","pasteHtml","myField","textSuffix","startPos","endPos","anchorNode","lastNode","frag","firstChild","cloneRange","setStartAfter","ctx","ce","getNodePositionInParent","reverse","startOffset","selectedElem","workingNodeContent","textContent","selectStartOffset","textComponent","wordsArray","trim","menuAlreadyActive","isAutocomplete","selectionInfo","getContentEditableSelectedPath","effectiveRange","getTextPrecedingCurrentSelection","lastWordOfEffectiveRange","getLastWordInText","mentionSelectedElement","mostRecentTriggerCharPos","c","lastIndexWithLeadingSpace","lastIndexOf","currentTriggerSnippet","firstSnippetChar","leadingSpace","regex","_char","reversedStr","cidx","len","firstChar","windowWidth","windowHeight","doc","documentElement","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","menuTop","menuRight","menuBottom","menuLeft","ceil","dimensions","flipped","isFirefox","mozInnerScreenX","computed","whiteSpace","wordWrap","prop","overflowY","overflow","span","rect","menuContainerIsBody","offsetTop","borderTopWidth","fontSize","borderLeftWidth","getMenuDimensions","parentHeight","scrollStillAvailable","removeChild","selectedNodePosition","markerEl","markerId","prevRange","clientRect","elemTop","elemBottom","maxY","targetY","TributeSearch","pattern","compareString","caseSensitive","rendered","score","patternCache","traverse","render","cache","stringIndex","patternIndex","calculateScore","best","temp","indices","prev","compare","predicate","list","thisArg","bubbles","cancelable","evt","createEvent","initCustomEvent","Event","define","metricsQuery","metrics","metricsData","metricsContainer","metricsParams","downloadMetricData","metricName","csvContent","metricData","encodeURI","container","onclick","isEmptyObject","names","spaceType","spaceId","history","aggregate","agg","isoParse","Number","x","y","ascending","parseData","title","objectName","showAxis","axis","ratio","showTooltip","tip","margin","titlePadding","scaleTime","scaleLinear","_area","area","y0","y1","valueline","line","domain","extent","nice","circle","tooltip","x0","invert","mouse","bisector","d0","d1","coords","tooltipContent","timeFormat","toLocaleString","xAxis","axisBottom","ticks","timeMonth","tickFormat","tickSize","yAxis","axisLeft","_xAxis","g","selectAll","_yAxis","titleLines","fulltext","wrapwidth","word","words","_line","lineNumber","_x","_y","tspan","getComputedTextLength","areachart","object","errors","log","message","statusText"],"sourceRoot":""}