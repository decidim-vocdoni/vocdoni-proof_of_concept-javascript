{"version":3,"file":"js/decidim_elections_trustee_tally_started-4b96a684af0ff2de8bb9.js","mappings":"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","sources":["webpack://decidim-development-app/webpack/runtime/chunk loaded","webpack://decidim-development-app/./node_modules/@decidim/decidim-bulletin_board/src/tally/tally.component.js","webpack://decidim-development-app/../decidim-elections/app/packs/src/decidim/elections/trustee/tally.js","webpack://decidim-development-app/../decidim-elections/app/packs/src/decidim/elections/broken_promises_handler.js","webpack://decidim-development-app/webpack/bootstrap","webpack://decidim-development-app/webpack/runtime/compat get default export","webpack://decidim-development-app/webpack/runtime/define property getters","webpack://decidim-development-app/webpack/runtime/global","webpack://decidim-development-app/webpack/runtime/hasOwnProperty shorthand","webpack://decidim-development-app/webpack/runtime/node module decorator","webpack://decidim-development-app/webpack/runtime/jsonp chunk loading","webpack://decidim-development-app/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// Components\nimport { TrusteeComponent } from \"../trustee/trustee.component\";\n\n/**\n * This class is used to bind any UI elements to a tally process.\n */\nexport class TallyComponent extends TrusteeComponent {\n  /**\n   * Setup the election for the trustee.\n   *\n   * @param {Object} params - An object that contains the initialization params.\n   *  - {Object} bulletinBoardClientParams - An object to configure the bulletin board client.\n   *  - {String} electionUniqueId - The unique identifier of an election.\n   *  - {Number} authorizationExpirationTimestamp - The timestamp until the authorization header is no longer valid.\n   *\n   * @returns {Promise<undefined>}\n   */\n  setupElection({\n    bulletinBoardClientParams,\n    electionUniqueId,\n    authorizationExpirationTimestamp,\n  }) {\n    return this.setupElectionWithTypesFilter({\n      electionUniqueId,\n      bulletinBoardClientParams,\n      authorizationExpirationTimestamp,\n      typesFilter: [\n        \"create_election\",\n        \"start_key_ceremony\",\n        \"key_ceremony\",\n        \"end_key_ceremony\",\n        \"start_tally\",\n        \"tally\",\n        \"end_tally\",\n      ],\n    });\n  }\n\n  /**\n   * Bind UI events to the key ceremony process.\n   *\n   * @method bindEvents\n   * @param {Object} eventCallbacks - An object that contains event callback functions.\n   * - {Function} onEvent - a function that is called when an event is emitted from the trustee.\n   * - {Function} onBindRestoreButton - a function that receives a callback function that will be called when\n   *                                    the restore process must be started.\n   * - {Function} onBindStartButton - a function that receives a callback function that will be called when\n   *                                  the key ceremony must be started.\n   * - {Function} onRestore - a function that is called when the trustee is restored.\n   * - {Function} onComplete - a function that is called when the key ceremony is done.\n   * - {Function} onStart - a function that is called when the key ceremony has started.\n   * - {Function} onTrusteeNeedsToBeRestored - a function that is called when the trustee must be restored.\n   *\n   * @returns {Promise<undefined>}\n   */\n  async bindEvents({\n    onEvent,\n    onBindRestoreButton,\n    onBindStartButton,\n    onRestore,\n    onComplete,\n    onStart,\n    onTrusteeNeedsToBeRestored,\n  }) {\n    const onSetupDone = this.trustee.setup();\n\n    this.trustee.events.subscribe(onEvent);\n\n    onBindStartButton(async (event) => {\n      onStart();\n      event.preventDefault();\n\n      await onSetupDone;\n\n      if (await this.trustee.needsToBeRestored()) {\n        onTrusteeNeedsToBeRestored();\n      } else {\n        await this.trustee.runTally();\n        onComplete();\n      }\n    });\n\n    onBindRestoreButton(async (event) => {\n      await onSetupDone;\n      const file = event.target.files[0];\n      const reader = new FileReader();\n      reader.onload = async ({ target }) => {\n        const content = target.result;\n        if (await this.trustee.restore(content)) {\n          onRestore();\n          await this.trustee.runTally();\n          onComplete();\n        }\n      };\n      reader.readAsText(file);\n    });\n  }\n}\n","// show a message to the user if comunication is lost\nimport \"src/decidim/elections/broken_promises_handler\";\n\nimport {\n  TallyComponent,\n  IdentificationKeys,\n  MessageIdentifier,\n  MESSAGE_RECEIVED\n} from \"@decidim/decidim-bulletin_board\";\n\nimport { TrusteeWrapperAdapter as DummyTrusteeWrapperAdapter } from \"@decidim/voting_schemes-dummy\";\nimport { TrusteeWrapperAdapter as ElectionGuardTrusteeWrapperAdapter } from \"@decidim/voting_schemes-electionguard\";\n\n$(() => {\n  // UI Elements\n  const $tally = $(\".trustee-step\");\n  const $startButton = $tally.find(\".start\");\n  const getStepRow = (step) => {\n    return $(`#${step.replace(\".\", \"-\")}`);\n  };\n  const $restoreModal = $(\"#show-restore-modal\");\n  const $restoreButton = $restoreModal.find(\".upload-election-keys\");\n  const $backButton = $tally.find(\".back\");\n  const TRUSTEE_AUTHORIZATION_EXPIRATION_TIME_IN_HOURS = 2;\n\n  // Data\n  const bulletinBoardClientParams = {\n    apiEndpointUrl: $tally.data(\"apiEndpointUrl\")\n  };\n  const electionUniqueId = `${$tally.data(\"authoritySlug\")}.${$tally.data(\n    \"electionId\"\n  )}`;\n  const authorityPublicKeyJSON = JSON.stringify(\n    $tally.data(\"authorityPublicKey\")\n  );\n  const schemeName = $tally.data(\"schemeName\");\n\n  const trusteeContext = {\n    uniqueId: $tally.data(\"trusteeSlug\"),\n    publicKeyJSON: JSON.stringify($tally.data(\"trusteePublicKey\"))\n  };\n  const trusteeIdentificationKeys = new IdentificationKeys(\n    trusteeContext.uniqueId,\n    trusteeContext.publicKeyJSON\n  );\n  let currentStep = null;\n\n  // Use the correct trustee wrapper adapter\n  let trusteeWrapperAdapter = null;\n\n  if (schemeName === \"dummy\") {\n    trusteeWrapperAdapter = new DummyTrusteeWrapperAdapter({\n      trusteeId: trusteeContext.uniqueId\n    });\n  } else if (schemeName === \"electionguard\") {\n    trusteeWrapperAdapter = new ElectionGuardTrusteeWrapperAdapter({\n      trusteeId: trusteeContext.uniqueId,\n      workerUrl: \"/assets/electionguard/webworker.js\"\n    });\n  } else {\n    throw new Error(`Voting scheme ${schemeName} not supported.`);\n  }\n\n  // Use the tally component and bind all UI events\n  const component = new TallyComponent({\n    authorityPublicKeyJSON,\n    trusteeUniqueId: trusteeContext.uniqueId,\n    trusteeIdentificationKeys,\n    trusteeWrapperAdapter\n  });\n\n  const bindComponentEvents = async () => {\n    await component.setupElection({\n      bulletinBoardClientParams,\n      electionUniqueId,\n      authorizationExpirationTimestamp:\n        Math.ceil(Number(new Date()) / 1000) +\n        TRUSTEE_AUTHORIZATION_EXPIRATION_TIME_IN_HOURS * 3600\n    });\n\n    await component.bindEvents({\n      onEvent(event) {\n        let messageIdentifier = MessageIdentifier.parse(\n          event.message.messageId\n        );\n\n        if (event.type === MESSAGE_RECEIVED) {\n          if (currentStep && currentStep !== messageIdentifier.typeSubtype) {\n            const $previousStep = getStepRow(currentStep);\n            $previousStep.attr(\"data-step-status\", \"completed\");\n          }\n          currentStep = messageIdentifier.typeSubtype;\n\n          const $currentStep = getStepRow(currentStep);\n          if ($currentStep.data(\"step-status\") !== \"completed\") {\n            $currentStep.attr(\"data-step-status\", \"processing\");\n          }\n        }\n      },\n      onBindStartButton(onEventTriggered) {\n        $startButton.on(\"click\", onEventTriggered);\n      },\n      onStart() {\n        $startButton.prop(\"disabled\", true);\n      },\n      onComplete() {\n        const $allSteps = $(\".step_status\");\n        $allSteps.attr(\"data-step-status\", \"completed\");\n\n        $startButton.addClass(\"hide\");\n        $backButton.removeClass(\"hide\");\n\n        $.ajax({\n          method: \"PATCH\",\n          url: $tally.data(\"updateElectionStatusUrl\"),\n          contentType: \"application/json\",\n          data: JSON.stringify({\n            status: \"tally_started\"\n          }),\n          headers: {\n            \"X-CSRF-Token\": $(\"meta[name=csrf-token]\").attr(\"content\")\n          }\n        });\n      },\n      onTrusteeNeedsToBeRestored() {\n        $restoreModal.foundation(\"open\");\n      },\n      onBindRestoreButton(onEventTriggered) {\n        $restoreButton.on(\"change\", \".restore-button-input\", onEventTriggered);\n      },\n      onRestore() {\n        $restoreModal.foundation(\"close\");\n      }\n    });\n    $startButton.prop(\"disabled\", false);\n  };\n\n  trusteeIdentificationKeys.present(async (exists) => {\n    if (exists) {\n      await bindComponentEvents();\n    }\n  });\n});\n","/* Fallback for non-handled failed promises */\nwindow.addEventListener(\"unhandledrejection\", (event) => {\n  console.log(\"broken\", event)\n  $(\"#server-failure .tech-info\").html(event.reason);\n  if (event.reason.toString().indexOf(\"fetch\") === -1) {\n    $(\"#server-failure .communication_error\").addClass(\"hide\");\n    $(\"#server-failure .generic_error\").removeClass(\"hide\");\n  }\n  $(\"#server-failure\").foundation(\"open\");\n});\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t3493: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdecidim_development_app\"] = self[\"webpackChunkdecidim_development_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [9098,8276,4486,2337], function() { return __webpack_require__(52913); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","TallyComponent","setupElection","bulletinBoardClientParams","electionUniqueId","authorizationExpirationTimestamp","this","setupElectionWithTypesFilter","typesFilter","async","onEvent","onBindRestoreButton","onBindStartButton","onRestore","onComplete","onStart","onTrusteeNeedsToBeRestored","onSetupDone","trustee","setup","events","subscribe","event","preventDefault","needsToBeRestored","runTally","file","target","files","reader","FileReader","onload","content","result","restore","readAsText","i","$","$tally","$startButton","find","getStepRow","step","replace","$restoreModal","$restoreButton","$backButton","apiEndpointUrl","data","authorityPublicKeyJSON","JSON","stringify","schemeName","trusteeContext","uniqueId","publicKeyJSON","trusteeIdentificationKeys","IdentificationKeys","currentStep","trusteeWrapperAdapter","DummyTrusteeWrapperAdapter","trusteeId","Error","ElectionGuardTrusteeWrapperAdapter","workerUrl","component","trusteeUniqueId","bindComponentEvents","Math","ceil","Number","Date","TRUSTEE_AUTHORIZATION_EXPIRATION_TIME_IN_HOURS","bindEvents","messageIdentifier","MessageIdentifier","message","messageId","type","MESSAGE_RECEIVED","typeSubtype","attr","$currentStep","onEventTriggered","on","prop","addClass","removeClass","ajax","method","url","contentType","status","headers","foundation","present","exists","window","addEventListener","console","log","html","reason","toString","indexOf","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","id","loaded","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","length","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","obj","prototype","hasOwnProperty","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}